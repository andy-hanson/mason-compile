{"version":3,"sources":["private/parse/parseLine.js"],"names":[],"mappings":";;AAAA,CAAC,UAAU,OAAV,EAAmB;AAChB,QAAI,OAAO,MAAP,KAAkB,QAAlB,IAA8B,OAAO,OAAO,OAAP,KAAmB,QAA1B,EAAoC;AAClE,YAAI,IAAI,QAAQ,OAAR,EAAiB,OAAjB,CAAJ,CAD8D,IAC3B,MAAM,SAAN,EAAiB,OAAO,OAAP,GAAiB,CAAjB,CAArB;KADvC,MAGK,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAAP,EAAY;AACjD,eAAO,CAAC,SAAD,EAAY,SAAZ,EAAuB,OAAvB,EAAgC,mBAAhC,EAAqD,aAArD,EAAoE,WAApE,EAAiF,eAAjF,EAAkG,eAAlG,EAAmH,aAAnH,EAAkI,cAAlI,EAAkJ,YAAlJ,EAAgK,YAAhK,EAA8K,gBAA9K,EAAgM,kBAAhM,EAAoN,SAApN,EAA+N,UAA/N,EAA2O,cAA3O,EAA2P,aAA3P,EAA0Q,sBAA1Q,EAAkS,mBAAlS,EAAuT,aAAvT,EAAsU,cAAtU,EAAsV,eAAtV,EAAuW,gBAAvW,EAAyX,SAAzX,CAAP,EAA4Y,OAA5Y,EADiD;KAAhD;CAJR,CAAD,CAOG,UAAU,OAAV,EAAmB,OAAnB,EAA4B;AAC3B,iBAD2B;;AAE3B,QAAI,OAAO,QAAQ,OAAR,CAAP,CAFuB;AAG3B,QAAI,eAAe,QAAQ,mBAAR,CAAf,CAHuB;AAI3B,QAAI,SAAS,QAAQ,aAAR,CAAT,CAJuB;AAK3B,QAAI,OAAO,QAAQ,WAAR,CAAP,CALuB;AAM3B,QAAI,WAAW,QAAQ,eAAR,CAAX,CANuB;AAO3B,QAAI,WAAW,QAAQ,eAAR,CAAX,CAPuB;AAQ3B,QAAI,SAAS,QAAQ,aAAR,CAAT,CARuB;AAS3B,QAAI,UAAU,QAAQ,cAAR,CAAV,CATuB;AAU3B,QAAI,QAAQ,QAAQ,YAAR,CAAR,CAVuB;AAW3B,QAAI,YAAY,QAAQ,YAAR,CAAZ,CAXuB;AAY3B,QAAI,UAAU,QAAQ,gBAAR,CAAV,CAZuB;AAa3B,QAAI,YAAY,QAAQ,kBAAR,CAAZ,CAbuB;AAc3B,QAAI,SAAS,QAAQ,SAAR,CAAT,CAduB;AAe3B,QAAI,WAAW,QAAQ,UAAR,CAAX,CAfuB;AAgB3B,QAAI,eAAe,QAAQ,cAAR,CAAf,CAhBuB;AAiB3B,QAAI,cAAc,QAAQ,aAAR,CAAd,CAjBuB;AAkB3B,QAAI,uBAAuB,QAAQ,sBAAR,CAAvB,CAlBuB;AAmB3B,QAAI,oBAAoB,QAAQ,mBAAR,CAApB,CAnBuB;AAoB3B,QAAI,cAAc,QAAQ,aAAR,CAAd,CApBuB;AAqB3B,QAAI,eAAe,QAAQ,cAAR,CAAf,CArBuB;AAsB3B,QAAI,gBAAgB,QAAQ,eAAR,CAAhB,CAtBuB;AAuB3B,QAAI,iBAAiB,QAAQ,gBAAR,CAAjB,CAvBuB;AAwB3B,QAAI,UAAU,QAAQ,SAAR,CAAV,CAxBuB;AAyB3B,aAAS,SAAT,CAAmB,MAAnB,EAA2B;AACvB,cAAM,MAAM,OAAO,GAAP,CADW;AAEvB,cAAM,OAAO,OAAO,IAAP,EAAP,CAFiB;AAGvB,cAAM,OAAO,MAAM,OAAO,IAAP,EAAN,CAHU;AAIvB,cAAM,SAAS,MAAM;AACjB,qBAAS,UAAT,CAAoB,MAApB,EAA4B,KAAK,EAAE,eAAF,CAAkB,IAAlB,CAAL,CAA5B,CADiB;SAAN,CAJQ;AAOvB,YAAI,gBAAgB,UAAU,OAAV,EAChB,QAAQ,KAAK,IAAL;AACJ,iBAAK,EAAL,CADJ;AAEI,iBAAK,GAAL;AACI,uBAAO,YAAY,KAAK,IAAL,KAAc,GAAd,EAAmB,MAA/B,CAAP,CADJ;AAFJ,iBAIS,EAAL;AACI,uBAAO,IAAI,OAAO,KAAP,CAAa,GAAjB,EAAsB,YAAY,WAAZ,CAAwB,MAAxB,CAAtB,CAAP,CADJ;AAJJ,iBAMS,EAAL;AACI,yBADJ;AAEI,uBAAO,IAAI,KAAK,SAAL,CAAe,GAAnB,EAAwB,CAAxB,CAAP,CAFJ;AANJ,iBASS,GAAL;AACI,uBAAO,IAAI,aAAa,QAAb,CAAsB,GAA1B,EAA+B,YAAY,OAAZ,CAAoB,MAApB,CAA/B,EAA4D,IAA5D,CAAP,CADJ;AATJ,iBAWS,GAAL;AACI,uBAAO,IAAI,KAAK,MAAL,CAAY,GAAhB,EAAqB,OAAO,GAAP,CAAW,qBAAqB,cAArB,CAAhC,CAAP,CADJ;AAXJ,iBAaS,GAAL;AACI,uBAAO,IAAI,aAAa,QAAb,CAAsB,GAA1B,EAA+B,YAAY,OAAZ,CAAoB,MAApB,CAA/B,CAAP,CADJ;AAbJ,iBAeS,GAAL;AACI,uBAAO,KAAK,MAAL,CAAY,YAAY,WAAZ,CAAwB,MAAxB,CAAZ,EAA6C,KAAK,IAAI,KAAK,IAAL,CAAU,OAAO,GAAP,EAAY,CAA1B,CAAL,EAAmC,MAAM,EAAN,CAAvF,CADJ;AAfJ,iBAiBS,GAAL;AACI,uBAAO,WAAW,aAAa,SAAb,CAAuB,GAAvB,EAA4B,MAA5B,CAAX,CAAP,CADJ;AAjBJ,iBAmBS,GAAL;AACI,uBAAO,IAAI,SAAS,KAAT,CAAe,GAAnB,EAAwB,YAAY,WAAZ,CAAwB,MAAxB,CAAxB,CAAP,CADJ;AAnBJ,iBAqBS,GAAL;AACI,uBAAO,eAAe,OAAf,CAAuB,MAAvB,CAAP,CADJ;AArBJ;SADJ;AA0BA,eAAO,KAAK,MAAL,CAAY,OAAO,WAAP,CAAmB,KAAK,UAAU,YAAV,CAAuB,iBAAvB,EAA0C,CAA1C,CAAL,CAA/B,EAAmF,QAAoC;gBAAjC,qBAAiC;gBAArB,eAAJ,GAAyB;gBAAZ,mBAAY;;AAC1H,kBAAM,KAAK,OAAL,CADoH;AAE1H,oBAAQ,GAAG,IAAH;AACJ,qBAAK,GAAL;AACI,2BAAO,IAAI,aAAa,QAAb,CAAsB,GAA1B,EAA+B,YAAY,OAAZ,CAAoB,MAApB,CAA/B,EAA4D,YAAY,OAAZ,CAAoB,KAApB,CAA5D,CAAP,CADJ;AADJ,qBAGS,GAAL;AACI,2BAAO,cAAc,MAAd,EAAsB,KAAtB,EAA6B,GAA7B,CAAP,CADJ;AAHJ;AAMQ,2BAAO,gBAAgB,MAAhB,EAAwB,EAAxB,EAA4B,YAAY,OAAZ,CAAoB,KAApB,CAA5B,EAAwD,GAAxD,CAAP,CADJ;AALJ,aAF0H;SAApC,EAUvF,MAAM,YAAY,OAAZ,CAAoB,MAApB,CAAN,CAVH,CAjCuB;KAA3B;AA6CA,WAAO,cAAP,CAAsB,OAAtB,EAA+B,YAA/B,EAA6C,EAAE,OAAO,IAAP,EAA/C,EAtE2B;AAuE3B,YAAQ,OAAR,GAAkB,SAAlB,CAvE2B;AAwE3B,UAAM,oBAAoB,IAAI,GAAJ,CAAQ,CAAC,EAAD,EAAK,GAAL,EAAU,GAAV,EAAe,GAAf,CAAR,CAApB,CAxEqB;AAyE3B,aAAS,UAAT,CAAoB,KAApB,EAA2B;AACvB,cAAM,eAAe,EAAf,CADiB;AAEvB,aAAK,MAAM,IAAN,IAAc,MAAM,MAAN,EAAnB,EAAmC;AAC/B,kBAAM,IAAI,UAAU,IAAV,CAAJ,CADyB;AAE/B,gBAAI,aAAa,KAAb,EACA,aAAa,IAAb,CAAkB,GAAG,CAAH,CAAlB,CADJ,KAGI,aAAa,IAAb,CAAkB,CAAlB,EAHJ;SAFJ;AAOA,eAAO,YAAP,CATuB;KAA3B;AAWA,YAAQ,UAAR,GAAqB,UAArB,CApF2B;AAqF3B,aAAS,eAAT,CAAyB,MAAzB,EAAiC,EAAjC,EAAqC,KAArC,EAA4C,GAA5C,EAAiD;AAC7C,cAAM,OAAO,GAAG,IAAH,CADgC;AAE7C,YAAI,OAAO,IAAP,OAAkB,CAAlB,EAAqB;AACrB,kBAAM,QAAQ,OAAO,IAAP,EAAR,CADe;AAErB,gBAAI,iBAAiB,QAAQ,UAAR,EAAoB;AACrC,sBAAM,SAAS,QAAQ,MAAR,CAAe,EAAf,CAAkB,KAAlB,CAAT,CAD+B;;mCAEV,KAAK,MAAL,CAAY,OAAO,WAAP,CAAmB,KAAK,UAAU,SAAV,CAAoB,EAApB,EAAwB,CAAxB,CAAL,CAA/B,EAAiE;wBAAG;wBAAQ;2BAAY,CAAC,MAAD,EAAS,YAAY,OAAZ,CAAoB,KAApB,CAAT;iBAAvB,EAA6D,MAAM,CAAC,MAAD,EAAS,IAAT,CAAN,EAFpH;;;;sBAE9B,4BAF8B;sBAEpB,0BAFoB;;AAGrC,sBAAM,OAAO,SAAS,IAAT,EAAP,CAH+B;AAIrC,sBAAM,SAAS,OAAS,IAAI,OAAJ,KAAgB,SAAS,WAAT,CAAqB,IAArB,CAA0B,IAAI,GAAJ,CAA1C,GAAqD,cAAc,OAAd,CAAsB,GAAtB,CAArD,CAJa;AAKrC,oBAAI,UAAU,SAAV,CAAoB,GAApB,EAAyB,SAAS,UAAT,EAAzB,CAAJ,EAAqD;AACjD,0BAAM,OAAO,kBAAkB,OAAlB,CAA0B,IAA1B,CAAP,CAD2C;AAEjD,0BAAM,MAAM,OAAO,SAAS,KAAT,GAAiB,KAAjB,EAAP,CAAN,CAF2C;AAGjD,2BAAO,IAAI,KAAK,SAAL,CAAe,GAAnB,EAAwB,GAAxB,EAA6B,IAA7B,EAAmC,MAAnC,EAA2C,QAAQ,EAAR,CAA3C,EAAwD,KAAxD,CAAP,CAHiD;iBAArD,MAKK,IAAI,gBAAgB,QAAQ,YAAR,EAAsB;AAC3C,0BAAM,MAAM,OAAO,SAAS,KAAT,EAAP,CAAN,CADqC;AAE3C,0BAAM,UAAU,YAAY,cAAZ,CAA2B,QAAQ,MAAR,CAAe,EAAf,CAAkB,IAAlB,CAA3B,CAAV,CAFqC;AAG3C,2BAAO,IAAI,KAAK,MAAL,CAAY,GAAhB,EAAqB,GAArB,EAA0B,OAA1B,EAAmC,MAAnC,EAA2C,QAAQ,EAAR,CAA3C,EAAwD,KAAxD,CAAP,CAH2C;iBAA1C;aAVT;SAFJ;AAmBA,YAAI,SAAS,GAAT,EACA,OAAO,iBAAiB,MAAjB,EAAyB,KAAzB,EAAgC,GAAhC,CAAP,CADJ,KAEK;AACD,mBAAO,MAAP,CAAc,SAAS,EAAT,CAAd,CADC;AAED,mBAAO,YAAY,MAAZ,EAAoB,KAApB,EAA2B,GAA3B,CAAP,CAFC;SAFL;KArBJ;AA4BA,aAAS,aAAT,CAAuB,MAAvB,EAA+B,KAA/B,EAAsC,GAAtC,EAA2C;AACvC,YAAI,OAAO,IAAP,OAAkB,CAAlB,EAAqB;AACrB,kBAAM,QAAQ,OAAO,IAAP,EAAR,CADe;AAErB,kBAAM,SAAS,UAAU,SAAV,CAAoB,GAApB,EAAyB,KAAzB,CAAT,CAFe;AAGrB,kBAAM,QAAQ,MAAM,YAAY,OAAZ,CAAoB,KAApB,CAAN,CAHO;AAIrB,gBAAI,MAAM,OAAN,EAAJ,EACI,OAAO,SACH,aAAa,aAAb,CAA2B,SAA3B,CAAqC,GAArC,EAA0C,IAAI,MAAM,UAAN,CAAiB,GAArB,EAA0B,CAA1B,CAA1C,CADG,GAEH,aAAa,aAAb,CAA2B,MAA3B,CAAkC,GAAlC,EAAuC,qBAAqB,cAArB,CAAoC,KAApC,CAAvC,CAFG,CADX,KAIK,IAAI,iBAAiB,UAAU,OAAV,EACtB,OAAO,IAAI,aAAa,aAAb,CAA2B,GAA/B,EAAoC,UAAU,WAAV,CAAsB,MAAM,IAAN,CAA1D,EAAuE,OAAvE,CAAP,CADC,KAEA,IAAI,iBAAiB,QAAQ,UAAR,EACtB,OAAO,IAAI,aAAa,aAAb,CAA2B,GAA/B,EAAoC,aAAa,OAAb,CAAqB,QAAQ,OAAR,CAAgB,EAAhB,CAAmB,KAAnB,CAArB,CAApC,EAAqF,OAArF,CAAP,CADC,KAEA,IAAI,iBAAiB,QAAQ,UAAR,EAAoB;AAC1C,sBAAM,QAAQ,QAAQ,MAAR,CAAe,EAAf,CAAkB,KAAlB,CAAR,CADoC;AAE1C,oBAAI,MAAM,IAAN,OAAiB,CAAjB,IAAsB,UAAU,SAAV,CAAoB,GAApB,EAAyB,MAAM,IAAN,EAAzB,CAAtB,EAA8D;AAC9D,0BAAM,OAAO,IAAI,QAAQ,WAAR,CAAoB,GAAxB,EAA6B,YAAY,OAAZ,CAAoB,MAAM,MAAN,EAApB,CAA7B,CAAP,CADwD;AAE9D,2BAAO,IAAI,aAAa,aAAb,CAA2B,GAA/B,EAAoC,IAApC,EAA0C,OAA1C,CAAP,CAF8D;iBAAlE;aAFC;SAZT;AAoBA,cAAM,SAAS,YAAY,MAAZ,EAAoB,YAAY,OAAZ,CAAoB,KAApB,CAApB,EAAgD,GAAhD,CAAT,CArBiC;AAsBvC,eAAO,IAAI,aAAa,cAAb,CAA4B,GAAhC,EAAqC,MAArC,CAAP,CAtBuC;KAA3C;AAwBA,aAAS,OAAT,CAAiB,OAAjB,EAA0B;AACtB,gBAAQ,QAAQ,IAAR;AACJ,iBAAK,EAAL;AACI,uBAAO,CAAP,CADJ;AADJ,iBAGS,GAAL;AACI,uBAAO,CAAP,CADJ;AAHJ;AAMQ,sBAAM,SAAS,UAAT,CAAoB,OAApB,CAAN,CADJ;AALJ,SADsB;KAA1B;AAUA,aAAS,gBAAT,CAA0B,YAA1B,EAAwC,KAAxC,EAA+C,GAA/C,EAAoD;AAChD,cAAM,SAAS,qBAAqB,2BAArB,CAAiD,YAAjD,CAAT,CAD0C;AAEhD,kBAAU,KAAV,CAAgB,OAAO,MAAP,KAAkB,CAAlB,EAAqB,GAArC,EAA0C,KAAK,EAAE,qBAAF,CAA/C,CAFgD;AAGhD,eAAO,IAAI,SAAS,WAAT,CAAqB,GAAzB,EAA8B,OAAO,CAAP,EAAU,IAAV,EAAgB,KAA9C,CAAP,CAHgD;KAApD;AAKA,aAAS,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0C,GAA1C,EAA+C;AAC3C,cAAM,SAAS,qBAAqB,OAArB,CAA6B,YAA7B,CAAT,CADqC;AAE3C,YAAI,OAAO,MAAP,KAAkB,CAAlB,EACA,OAAO,IAAI,SAAS,YAAT,CAAsB,GAA1B,EAA+B,OAAO,CAAP,CAA/B,EAA0C,KAA1C,CAAP,CADJ,KAEK;AACD,sBAAU,KAAV,CAAgB,OAAO,MAAP,GAAgB,CAAhB,EAAmB,aAAa,GAAb,EAAkB,KAAK,EAAE,aAAF,CAA1D,CADC;AAED,kBAAM,OAAO,OAAO,CAAP,EAAU,IAAV,CAFZ;AAGD,iBAAK,MAAM,CAAN,IAAW,MAAhB,EACI,UAAU,KAAV,CAAgB,EAAE,IAAF,KAAW,IAAX,EAAiB,EAAE,GAAF,EAAO,KAAK,EAAE,kBAAF,CAA7C,CADJ;AAEA,mBAAO,IAAI,SAAS,iBAAT,CAA2B,GAA/B,EAAoC,MAApC,EAA4C,KAA5C,CAAP,CALC;SAFL;KAFJ;AAYA,aAAS,WAAT,CAAqB,MAArB,EAA6B,MAA7B,EAAqC;AACjC,iBAAS,aAAT,CAAuB,MAAvB,EAA+B,KAAK,EAAE,mBAAF,CAApC,CADiC;;4BAEF,KAAK,MAAL,CAAY,OAAO,WAAP,CAAmB,KAAK,UAAU,SAAV,CAAoB,GAApB,EAAyB,CAAzB,CAAL,CAA/B,EAAkE;gBAAG;gBAAQ;mBAAY,CAAC,MAAD,EAAS,YAAY,OAAZ,CAAoB,KAApB,CAAT;SAAvB,EAA6D,MAAM,CAAC,MAAD,EAAS,IAAT,CAAN,EAF7H;;;;cAE1B,8BAF0B;cAEd,4BAFc;;AAGjC,cAAM,QAAQ,YAAY,cAAZ,CAA2B,UAA3B,CAAR,CAH2B;AAIjC,cAAM,OAAO,MAAM,MAAN,KAAiB,CAAjB,GAAqB,MAAM,CAAN,CAArB,GAAgC,IAAI,OAAO,OAAP,CAAe,WAAW,GAAX,EAAgB,MAAM,CAAN,CAAnC,EAA6C,OAAO,IAAP,CAAY,KAAZ,CAA7C,CAAhC,CAJoB;AAKjC,eAAO,IAAI,SAAS,MAAT,CAAgB,OAAO,GAAP,EAAY,MAAhC,EAAwC,IAAxC,EAA8C,QAA9C,CAAP,CALiC;KAArC;CApKD,CAPH","file":"private/parse/parseLine.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../ast/BuildEntry', '../ast/Call', '../ast/Do', '../ast/errors', '../ast/locals', '../ast/Loop', '../ast/Quote', '../ast/Val', '../context', '../token/Group', '../token/Keyword', '../util', './checks', './parseBlock', './parseExpr', './parseLocalDeclares', './parseMemberName', './parseName', './parseQuote', './parseSpaced', './parseTraitDo', './Slice'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var BuildEntry_1 = require('../ast/BuildEntry');\n    var Call_1 = require('../ast/Call');\n    var Do_1 = require('../ast/Do');\n    var errors_1 = require('../ast/errors');\n    var locals_1 = require('../ast/locals');\n    var Loop_1 = require('../ast/Loop');\n    var Quote_1 = require('../ast/Quote');\n    var Val_1 = require('../ast/Val');\n    var context_1 = require('../context');\n    var Group_1 = require('../token/Group');\n    var Keyword_1 = require('../token/Keyword');\n    var util_1 = require('../util');\n    var checks_1 = require('./checks');\n    var parseBlock_1 = require('./parseBlock');\n    var parseExpr_1 = require('./parseExpr');\n    var parseLocalDeclares_1 = require('./parseLocalDeclares');\n    var parseMemberName_1 = require('./parseMemberName');\n    var parseName_1 = require('./parseName');\n    var parseQuote_1 = require('./parseQuote');\n    var parseSpaced_1 = require('./parseSpaced');\n    var parseTraitDo_1 = require('./parseTraitDo');\n    var Slice_1 = require('./Slice');\n    function parseLine(tokens) {\n        const loc = tokens.loc;\n        const head = tokens.head();\n        const rest = () => tokens.tail();\n        const noRest = () => {\n            checks_1.checkEmpty(rest(), _ => _.unexpectedAfter(head));\n        };\n        if (head instanceof Keyword_1.default)\n            switch (head.kind) {\n                case 87:\n                case 113:\n                    return parseAssert(head.kind === 113, rest());\n                case 90:\n                    return new Loop_1.Break(loc, parseExpr_1.opParseExpr(rest()));\n                case 98:\n                    noRest();\n                    return new Do_1.SpecialDo(loc, 0);\n                case 103:\n                    return new BuildEntry_1.BagEntry(loc, parseExpr_1.default(rest()), true);\n                case 128:\n                    return new Do_1.Ignore(loc, rest().map(parseLocalDeclares_1.parseLocalName));\n                case 140:\n                    return new BuildEntry_1.BagEntry(loc, parseExpr_1.default(rest()));\n                case 157:\n                    return Op_1.caseOp(parseExpr_1.opParseExpr(rest()), _ => new Do_1.Pass(tokens.loc, _), () => []);\n                case 159:\n                    return parseLines(parseBlock_1.justBlock(159, rest()));\n                case 165:\n                    return new errors_1.Throw(loc, parseExpr_1.opParseExpr(rest()));\n                case 168:\n                    return parseTraitDo_1.default(rest());\n                default:\n            }\n        return Op_1.caseOp(tokens.opSplitOnce(_ => Keyword_1.isAnyKeyword(lineSplitKeywords, _)), ({ before, at: atToken, after }) => {\n            const at = atToken;\n            switch (at.kind) {\n                case 134:\n                    return new BuildEntry_1.MapEntry(loc, parseExpr_1.default(before), parseExpr_1.default(after));\n                case 140:\n                    return parseObjEntry(before, after, loc);\n                default:\n                    return parseAssignLike(before, at, parseExpr_1.default(after), loc);\n            }\n        }, () => parseExpr_1.default(tokens));\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = parseLine;\n    const lineSplitKeywords = new Set([88, 133, 134, 140]);\n    function parseLines(lines) {\n        const lineContents = [];\n        for (const line of lines.slices()) {\n            const _ = parseLine(line);\n            if (_ instanceof Array)\n                lineContents.push(..._);\n            else\n                lineContents.push(_);\n        }\n        return lineContents;\n    }\n    exports.parseLines = parseLines;\n    function parseAssignLike(before, at, value, loc) {\n        const kind = at.kind;\n        if (before.size() === 1) {\n            const token = before.head();\n            if (token instanceof Group_1.GroupSpace) {\n                const spaced = Slice_1.Tokens.of(token);\n                const [assignee, opType] = Op_1.caseOp(spaced.opSplitOnce(_ => Keyword_1.isKeyword(96, _)), ({ before, after }) => [before, parseExpr_1.default(after)], () => [spaced, null]);\n                const last = assignee.last();\n                const object = (obj) => obj.isEmpty() ? locals_1.LocalAccess.this(obj.loc) : parseSpaced_1.default(obj);\n                if (Keyword_1.isKeyword(101, assignee.nextToLast())) {\n                    const name = parseMemberName_1.default(last);\n                    const set = object(assignee.rtail().rtail());\n                    return new Do_1.MemberSet(loc, set, name, opType, setKind(at), value);\n                }\n                else if (last instanceof Group_1.GroupBracket) {\n                    const set = object(assignee.rtail());\n                    const subbeds = parseExpr_1.parseExprParts(Slice_1.Tokens.of(last));\n                    return new Do_1.SetSub(loc, set, subbeds, opType, setKind(at), value);\n                }\n            }\n        }\n        if (kind === 133)\n            return parseLocalMutate(before, value, loc);\n        else {\n            util_1.assert(kind === 88);\n            return parseAssign(before, value, loc);\n        }\n    }\n    function parseObjEntry(before, after, loc) {\n        if (before.size() === 1) {\n            const token = before.head();\n            const isName = Keyword_1.isKeyword(137, token);\n            const value = () => parseExpr_1.default(after);\n            if (after.isEmpty())\n                return isName ?\n                    BuildEntry_1.ObjEntryPlain.nameEntry(loc, new Val_1.SpecialVal(loc, 1)) :\n                    BuildEntry_1.ObjEntryPlain.access(loc, parseLocalDeclares_1.parseLocalName(token));\n            else if (token instanceof Keyword_1.default)\n                return new BuildEntry_1.ObjEntryPlain(loc, Keyword_1.keywordName(token.kind), value());\n            else if (token instanceof Group_1.GroupQuote)\n                return new BuildEntry_1.ObjEntryPlain(loc, parseQuote_1.default(Slice_1.default.of(token)), value());\n            else if (token instanceof Group_1.GroupSpace) {\n                const slice = Slice_1.Tokens.of(token);\n                if (slice.size() === 2 && Keyword_1.isKeyword(164, slice.head())) {\n                    const name = new Quote_1.QuoteSimple(loc, parseName_1.default(slice.second()));\n                    return new BuildEntry_1.ObjEntryPlain(loc, name, value());\n                }\n            }\n        }\n        const assign = parseAssign(before, parseExpr_1.default(after), loc);\n        return new BuildEntry_1.ObjEntryAssign(loc, assign);\n    }\n    function setKind(keyword) {\n        switch (keyword.kind) {\n            case 88:\n                return 0;\n            case 133:\n                return 1;\n            default:\n                throw checks_1.unexpected(keyword);\n        }\n    }\n    function parseLocalMutate(localsTokens, value, loc) {\n        const locals = parseLocalDeclares_1.parseLocalDeclaresJustNames(localsTokens);\n        context_1.check(locals.length === 1, loc, _ => _.todoMutateDestructure);\n        return new locals_1.LocalMutate(loc, locals[0].name, value);\n    }\n    function parseAssign(localsTokens, value, loc) {\n        const locals = parseLocalDeclares_1.default(localsTokens);\n        if (locals.length === 1)\n            return new locals_1.AssignSingle(loc, locals[0], value);\n        else {\n            context_1.check(locals.length > 1, localsTokens.loc, _ => _.assignNothing);\n            const kind = locals[0].kind;\n            for (const _ of locals)\n                context_1.check(_.kind === kind, _.loc, _ => _.destructureAllLazy);\n            return new locals_1.AssignDestructure(loc, locals, value);\n        }\n    }\n    function parseAssert(negate, tokens) {\n        checks_1.checkNonEmpty(tokens, _ => _.expectedAfterAssert);\n        const [condTokens, opThrown] = Op_1.caseOp(tokens.opSplitOnce(_ => Keyword_1.isKeyword(165, _)), ({ before, after }) => [before, parseExpr_1.default(after)], () => [tokens, null]);\n        const parts = parseExpr_1.parseExprParts(condTokens);\n        const cond = parts.length === 1 ? parts[0] : new Call_1.default(condTokens.loc, parts[0], util_1.tail(parts));\n        return new errors_1.Assert(tokens.loc, negate, cond, opThrown);\n    }\n});\n"],"sourceRoot":"/source/"}