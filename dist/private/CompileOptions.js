if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports', 'module', './util'], function (exports, module, _util) {
	'use strict';

	class CompileOptions {
		constructor() {
			let opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

			if (opts === undefined) opts = {};
			(0, _util.type)(opts, Object);

			const define = (name, _default) => {
				const getDefault = () => {
					const _ = opts[name];
					if (_ === undefined) return _default;else {
						(0, _util.type)(_, _default.constructor);
						return _;
					}
				};
				this[`_${ name }`] = getDefault();
			};

			const defaults = {
				includeAmdefine: false,
				includeSourceMap: true,
				includeModuleName: true,
				lazyModules: false,
				useStrict: true,
				checks: true,
				'warn-as-error': false,
				importBoot: true,
				mslPath: 'msl'
			};

			const allOpts = new Set(Object.keys(defaults).concat(['inFile', 'builtins']));

			for (const _ in defaults) define(_, defaults[_]);

			for (const _ in opts) if (!allOpts.has(_)) throw new Error(`Unrecognized key ${ _ }`);

			const inFile = opts.inFile;
			if (inFile === undefined) {
				if (this._includeSourceMap) throw new Error('Either supply `inFile` option or make `includeSourceMap` false.');
				if (this._includeModuleName) throw new Error('Either supply `inFile` option or make `includeModuleName` false.');
			} else {
				(0, _util.type)(inFile, String);
				this._inFile = inFile;
			}

			const builtins = opts.builtins || defaultBuiltins(this._mslPath);
			this.builtinNameToPath = generateBuiltinsMap(builtins);
		}

		moduleName() {
			return this._inFile === undefined ? 'anonymous' : noExt(basename(this._inFile));
		}

		jsBaseName() {
			return `${ this.moduleName() }.js`;
		}
		modulePath() {
			return this._inFile;
		}

		includeChecks() {
			return this._checks;
		}

		warnAsError() {
			return this['_warn-as-error'];
		}

		includeAmdefine() {
			return this._includeAmdefine;
		}
		includeSourceMap() {
			return this._includeSourceMap;
		}
		includeModuleName() {
			return this._includeModuleName;
		}
		includeUseStrict() {
			return this._useStrict;
		}

		lazyModule() {
			return this._lazyModules;
		}

		importBoot() {
			return this._importBoot;
		}
		bootPath() {
			return `${ this._mslPath }/private/boot`;
		}
	}

	module.exports = CompileOptions;

	const basename = path => (0, _util.last)(path.split('/')),
	      extname = path => (0, _util.last)(path.split('.')),
	      noExt = path =>
	// - 1 for the '.'
	path.substring(0, path.length - 1 - extname(path).length),
	      defaultBuiltins = mslPath => {
		const builtins = {
			global: ['Array', 'Boolean', 'Error', 'Function', 'Math', 'Number', 'Object', 'RegExp', 'String', 'Symbol'],
			'msl.@.?': ['un-?'],
			'msl.@.@': ['_', '-!', 'all?', 'count', 'empty?', 'empty!', 'iterator'],
			'msl.@.@-Type': ['empty'],
			'msl.@.Map.Map': ['_', 'assoc!', '?get'],
			'msl.@.Range': ['_'],
			'msl.@.Seq.Seq': ['_', '+>!'],
			'msl.@.Seq.Stream': ['_'],
			'msl.@.Set.Set': ['_'],
			'msl.$': ['_'],
			'msl.compare': ['=?', '<?', '<=?', '>?', '>=?', 'min', 'max'],
			'msl.Generator': ['gen-next!'],
			'msl.math.methods': ['+', '-', '*', '/'],
			'msl.math.Number': ['divisible?', 'int/', 'modulo', 'neg', 'log'],
			'msl.to-string': ['_', 'inspect'],
			'msl.Type.Kind': ['_', 'kind!', 'self-kind!'],
			'msl.Type.Method': ['_', 'impl!', 'impl-for', 'self-impl!'],
			'msl.Type.Type': ['=>']
		};
		if (mslPath !== 'msl') for (let key in builtins) {
			const x = builtins[key];
			delete builtins[key];
			builtins[key.replace(/msl/g, mslPath)] = x;
		}
		return builtins;
	},
	      generateBuiltinsMap = builtins => {
		const m = new Map();
		for (const path in builtins) {
			const realPath = path.replace(/\./g, '/');
			for (let imported of builtins[path]) {
				if (imported === '_') imported = (0, _util.last)(path.split('.'));
				if (m.has(imported)) throw new Error(`Builtin ${ imported } defined more than once.`);
				m.set(imported, realPath);
			}
		}
		return m;
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbXBpbGVPcHRpb25zLmpzIiwicHJpdmF0ZS9Db21waWxlT3B0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDRWUsT0FBTSxjQUFjLENBQUM7QUFDbkMsYUFBVyxHQUFZO09BQVgsSUFBSSx5REFBRyxFQUFFOztBQUNwQixPQUFJLElBQUksS0FBSyxTQUFTLEVBQUUsSUFBSSxHQUFHLEVBQUUsQ0FBQTtBQUNqQyxhQUxZLElBQUksRUFLWCxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUE7O0FBRWxCLFNBQU0sTUFBTSxHQUFHLENBQUMsSUFBSSxFQUFFLFFBQVEsS0FBSztBQUNsQyxVQUFNLFVBQVUsR0FBRyxNQUFNO0FBQ3hCLFdBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUNwQixTQUFJLENBQUMsS0FBSyxTQUFTLEVBQ2xCLE9BQU8sUUFBUSxDQUFBLEtBQ1g7QUFDSixnQkFiUyxJQUFJLEVBYVIsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQTtBQUM3QixhQUFPLENBQUMsQ0FBQTtNQUNSO0tBQ0QsQ0FBQTtBQUNELFFBQUksQ0FBQyxDQUFDLENBQUMsR0FBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUE7SUFDL0IsQ0FBQTs7QUFFRCxTQUFNLFFBQVEsR0FBRztBQUNoQixtQkFBZSxFQUFFLEtBQUs7QUFDdEIsb0JBQWdCLEVBQUUsSUFBSTtBQUN0QixxQkFBaUIsRUFBRSxJQUFJO0FBQ3ZCLGVBQVcsRUFBRSxLQUFLO0FBQ2xCLGFBQVMsRUFBRSxJQUFJO0FBQ2YsVUFBTSxFQUFFLElBQUk7QUFDWixtQkFBZSxFQUFFLEtBQUs7QUFDdEIsY0FBVSxFQUFFLElBQUk7QUFDaEIsV0FBTyxFQUFFLEtBQUs7SUFDZCxDQUFBOztBQUVELFNBQU0sT0FBTyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFB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bXBpbGVPcHRpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsLCJpbXBvcnQge2xhc3QsIHR5cGV9IGZyb20gJy4vdXRpbCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcGlsZU9wdGlvbnMge1xuXHRjb25zdHJ1Y3RvcihvcHRzID0ge30pIHtcblx0XHRpZiAob3B0cyA9PT0gdW5kZWZpbmVkKSBvcHRzID0ge31cblx0XHR0eXBlKG9wdHMsIE9iamVjdClcblxuXHRcdGNvbnN0IGRlZmluZSA9IChuYW1lLCBfZGVmYXVsdCkgPT4ge1xuXHRcdFx0Y29uc3QgZ2V0RGVmYXVsdCA9ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgXyA9IG9wdHNbbmFtZV1cblx0XHRcdFx0aWYgKF8gPT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRyZXR1cm4gX2RlZmF1bHRcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dHlwZShfLCBfZGVmYXVsdC5jb25zdHJ1Y3Rvcilcblx0XHRcdFx0XHRyZXR1cm4gX1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzW2BfJHtuYW1lfWBdID0gZ2V0RGVmYXVsdCgpXG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVmYXVsdHMgPSB7XG5cdFx0XHRpbmNsdWRlQW1kZWZpbmU6IGZhbHNlLFxuXHRcdFx0aW5jbHVkZVNvdXJjZU1hcDogdHJ1ZSxcblx0XHRcdGluY2x1ZGVNb2R1bGVOYW1lOiB0cnVlLFxuXHRcdFx0bGF6eU1vZHVsZXM6IGZhbHNlLFxuXHRcdFx0dXNlU3RyaWN0OiB0cnVlLFxuXHRcdFx0Y2hlY2tzOiB0cnVlLFxuXHRcdFx0J3dhcm4tYXMtZXJyb3InOiBmYWxzZSxcblx0XHRcdGltcG9ydEJvb3Q6IHRydWUsXG5cdFx0XHRtc2xQYXRoOiAnbXNsJ1xuXHRcdH1cblxuXHRcdGNvbnN0IGFsbE9wdHMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKGRlZmF1bHRzKS5jb25jYXQoWydpbkZpbGUnLCAnYnVpbHRpbnMnXSkpXG5cblx0XHRmb3IgKGNvbnN0IF8gaW4gZGVmYXVsdHMpXG5cdFx0XHRkZWZpbmUoXywgZGVmYXVsdHNbX10pXG5cblx0XHRmb3IgKGNvbnN0IF8gaW4gb3B0cylcblx0XHRcdGlmICghYWxsT3B0cy5oYXMoXykpXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleSAke199YClcblxuXHRcdGNvbnN0IGluRmlsZSA9IG9wdHMuaW5GaWxlXG5cdFx0aWYgKGluRmlsZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpZiAodGhpcy5faW5jbHVkZVNvdXJjZU1hcClcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFaXRoZXIgc3VwcGx5IGBpbkZpbGVgIG9wdGlvbiBvciBtYWtlIGBpbmNsdWRlU291cmNlTWFwYCBmYWxzZS4nKVxuXHRcdFx0aWYgKHRoaXMuX2luY2x1ZGVNb2R1bGVOYW1lKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0VpdGhlciBzdXBwbHkgYGluRmlsZWAgb3B0aW9uIG9yIG1ha2UgYGluY2x1ZGVNb2R1bGVOYW1lYCBmYWxzZS4nKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0eXBlKGluRmlsZSwgU3RyaW5nKVxuXHRcdFx0dGhpcy5faW5GaWxlID0gaW5GaWxlXG5cdFx0fVxuXG5cdFx0Y29uc3QgYnVpbHRpbnMgPSBvcHRzLmJ1aWx0aW5zIHx8IGRlZmF1bHRCdWlsdGlucyh0aGlzLl9tc2xQYXRoKVxuXHRcdHRoaXMuYnVpbHRpbk5hbWVUb1BhdGggPSBnZW5lcmF0ZUJ1aWx0aW5zTWFwKGJ1aWx0aW5zKVxuXHR9XG5cblx0bW9kdWxlTmFtZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5faW5GaWxlID09PSB1bmRlZmluZWQgPyAnYW5vbnltb3VzJyA6IG5vRXh0KGJhc2VuYW1lKHRoaXMuX2luRmlsZSkpXG5cdH1cblxuXHRqc0Jhc2VOYW1lKCkgeyByZXR1cm4gYCR7dGhpcy5tb2R1bGVOYW1lKCl9LmpzYCB9XG5cdG1vZHVsZVBhdGgoKSB7IHJldHVybiB0aGlzLl9pbkZpbGUgfVxuXG5cdGluY2x1ZGVDaGVja3MoKSB7IHJldHVybiB0aGlzLl9jaGVja3MgfVxuXG5cdHdhcm5Bc0Vycm9yKCkgeyByZXR1cm4gdGhpc1snX3dhcm4tYXMtZXJyb3InXSB9XG5cblx0aW5jbHVkZUFtZGVmaW5lKCkgeyByZXR1cm4gdGhpcy5faW5jbHVkZUFtZGVmaW5lIH1cblx0aW5jbHVkZVNvdXJjZU1hcCgpIHsgcmV0dXJuIHRoaXMuX2luY2x1ZGVTb3VyY2VNYXAgfVxuXHRpbmNsdWRlTW9kdWxlTmFtZSgpIHsgcmV0dXJuIHRoaXMuX2luY2x1ZGVNb2R1bGVOYW1lIH1cblx0aW5jbHVkZVVzZVN0cmljdCgpIHsgcmV0dXJuIHRoaXMuX3VzZVN0cmljdCB9XG5cblx0bGF6eU1vZHVsZSgpIHsgcmV0dXJuIHRoaXMuX2xhenlNb2R1bGVzIH1cblxuXHRpbXBvcnRCb290KCkgeyByZXR1cm4gdGhpcy5faW1wb3J0Qm9vdCB9XG5cdGJvb3RQYXRoKCkgeyByZXR1cm4gYCR7dGhpcy5fbXNsUGF0aH0vcHJpdmF0ZS9ib290YCB9XG59XG5cbmNvbnN0XG5cdGJhc2VuYW1lID0gcGF0aCA9PlxuXHRcdGxhc3QocGF0aC5zcGxpdCgnLycpKSxcblx0ZXh0bmFtZSA9IHBhdGggPT5cblx0XHRsYXN0KHBhdGguc3BsaXQoJy4nKSksXG5cdG5vRXh0ID0gcGF0aCA9PlxuXHRcdC8vIC0gMSBmb3IgdGhlICcuJ1xuXHRcdHBhdGguc3Vic3RyaW5nKDAsIHBhdGgubGVuZ3RoIC0gMSAtIGV4dG5hbWUocGF0aCkubGVuZ3RoKSxcblx0ZGVmYXVsdEJ1aWx0aW5zID0gbXNsUGF0aCA9PiB7XG5cdFx0Y29uc3QgYnVpbHRpbnMgPSB7XG5cdFx0XHRnbG9iYWw6IFsnQXJyYXknLCAnQm9vbGVhbicsICdFcnJvcicsICdGdW5jdGlvbicsICdNYXRoJywgJ051bWJlcicsICdPYmplY3QnLFxuXHRcdFx0XHQnUmVnRXhwJywgJ1N0cmluZycsICdTeW1ib2wnXSxcblx0XHRcdCdtc2wuQC4/JzogWyd1bi0/J10sXG5cdFx0XHQnbXNsLkAuQCc6IFsnXycsICctIScsICdhbGw/JywgJ2NvdW50JywgJ2VtcHR5PycsICdlbXB0eSEnLCAnaXRlcmF0b3InXSxcblx0XHRcdCdtc2wuQC5ALVR5cGUnOiBbJ2VtcHR5J10sXG5cdFx0XHQnbXNsLkAuTWFwLk1hcCc6IFsnXycsICdhc3NvYyEnLCAnP2dldCddLFxuXHRcdFx0J21zbC5ALlJhbmdlJzogWydfJ10sXG5cdFx0XHQnbXNsLkAuU2VxLlNlcSc6IFsnXycsICcrPiEnXSxcblx0XHRcdCdtc2wuQC5TZXEuU3RyZWFtJzogWydfJ10sXG5cdFx0XHQnbXNsLkAuU2V0LlNldCc6IFsnXyddLFxuXHRcdFx0J21zbC4kJzogWydfJ10sXG5cdFx0XHQnbXNsLmNvbXBhcmUnOiBbJz0/JywgJzw/JywgJzw9PycsICc+PycsICc+PT8nLCAnbWluJywgJ21heCddLFxuXHRcdFx0J21zbC5HZW5lcmF0b3InOiBbJ2dlbi1uZXh0ISddLFxuXHRcdFx0J21zbC5tYXRoLm1ldGhvZHMnOiBbJysnLCAnLScsICcqJywgJy8nXSxcblx0XHRcdCdtc2wubWF0aC5OdW1iZXInOiBbJ2RpdmlzaWJsZT8nLCAnaW50LycsICdtb2R1bG8nLCAnbmVnJywgJ2xvZyddLFxuXHRcdFx0J21zbC50by1zdHJpbmcnOiBbJ18nLCAnaW5zcGVjdCddLFxuXHRcdFx0J21zbC5UeXBlLktpbmQnOiBbJ18nLCAna2luZCEnLCAnc2VsZi1raW5kISddLFxuXHRcdFx0J21zbC5UeXBlLk1ldGhvZCc6IFsnXycsICdpbXBsIScsICdpbXBsLWZvcicsICdzZWxmLWltcGwhJ10sXG5cdFx0XHQnbXNsLlR5cGUuVHlwZSc6IFsnPT4nXVxuXHRcdH1cblx0XHRpZiAobXNsUGF0aCAhPT0gJ21zbCcpXG5cdFx0XHRmb3IgKGxldCBrZXkgaW4gYnVpbHRpbnMpIHtcblx0XHRcdFx0Y29uc3QgeCA9IGJ1aWx0aW5zW2tleV1cblx0XHRcdFx0ZGVsZXRlIGJ1aWx0aW5zW2tleV1cblx0XHRcdFx0YnVpbHRpbnNba2V5LnJlcGxhY2UoL21zbC9nLCBtc2xQYXRoKV0gPSB4XG5cdFx0XHR9XG5cdFx0cmV0dXJuIGJ1aWx0aW5zXG5cdH0sXG5cdGdlbmVyYXRlQnVpbHRpbnNNYXAgPSBidWlsdGlucyA9PiB7XG5cdFx0Y29uc3QgbSA9IG5ldyBNYXAoKVxuXHRcdGZvciAoY29uc3QgcGF0aCBpbiBidWlsdGlucykge1xuXHRcdFx0Y29uc3QgcmVhbFBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLi9nLCAnLycpXG5cdFx0XHRmb3IgKGxldCBpbXBvcnRlZCBvZiBidWlsdGluc1twYXRoXSkge1xuXHRcdFx0XHRpZiAoaW1wb3J0ZWQgPT09ICdfJylcblx0XHRcdFx0XHRpbXBvcnRlZCA9IGxhc3QocGF0aC5zcGxpdCgnLicpKVxuXHRcdFx0XHRpZiAobS5oYXMoaW1wb3J0ZWQpKVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgQnVpbHRpbiAke2ltcG9ydGVkfSBkZWZpbmVkIG1vcmUgdGhhbiBvbmNlLmApXG5cdFx0XHRcdG0uc2V0KGltcG9ydGVkLCByZWFsUGF0aClcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG1cblx0fVxuIl0sInNvdXJjZVJvb3QiOiIvc3JjIn0=
