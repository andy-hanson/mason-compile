if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports', 'module', './util'], function (exports, module, _util) {
	'use strict';

	/**
 Stores `opts` parameter to compile methods and supplies defaults.
 See {@link compile} for description of options.
 */

	class CompileOptions {
		constructor(opts) {
			const define = (name, _default) => {
				this[`_${ name }`] = opts[name] === undefined ? _default : opts[name];
			};

			const defaults = {
				includeAmdefine: false,
				includeSourceMap: true,
				lazyModules: false,
				useStrict: true,
				checks: true,
				importBoot: true,
				mslPath: 'msl',
				indent: '\t'
			};

			const allOpts = new Set(Object.keys(defaults).concat(['inFile', 'builtins']));

			for (const _ in defaults) define(_, defaults[_]);

			for (const _ in opts) if (!allOpts.has(_)) throw new Error(`Unrecognized option ${ _ }`);

			const inFile = opts.inFile;
			if (inFile === undefined) {
				if (this._includeSourceMap) throw new Error('Either supply `inFile` option or make `includeSourceMap` false.');
			} else {
				(0, _util.type)(inFile, String);
				this._inFile = inFile;
			}

			if (!(this._indent === '\t' || 2 <= this._indent && this._indent <= 8)) throw new Error(`opts.indent must be '\t' or a number 2-8, got: ${ this._indent }`);

			const builtins = opts.builtins || defaultBuiltins(this._mslPath);
			this.builtinNameToPath = generateBuiltinsMap(builtins);
		}

		indent() {
			return this._indent;
		}

		moduleName() {
			return this._inFile === undefined ? 'anonymous' : noExt(basename(this._inFile));
		}

		jsBaseName() {
			return `${ this.moduleName() }.js`;
		}
		modulePath() {
			return this._inFile;
		}

		includeChecks() {
			return this._checks;
		}

		includeAmdefine() {
			return this._includeAmdefine;
		}
		includeSourceMap() {
			return this._includeSourceMap;
		}
		includeUseStrict() {
			return this._useStrict;
		}

		lazyModule() {
			return this._lazyModules;
		}

		importBoot() {
			return this._importBoot;
		}
		bootPath() {
			return `${ this._mslPath }/private/boot`;
		}
	}

	module.exports = CompileOptions;

	const basename = path => (0, _util.last)(path.split('/')),
	      extname = path => (0, _util.last)(path.split('.')),
	      noExt = path =>
	// - 1 for the '.'
	path.substring(0, path.length - 1 - extname(path).length),
	      defaultBuiltins = mslPath => {
		const builtins = {
			global: ['Array', 'Boolean', 'Error', 'Function', 'Math', 'Number', 'Object', 'RegExp', 'String', 'Symbol'],
			'msl.@.?': ['un-?'],
			'msl.@.@': ['_', '-!', 'all?', 'count', 'empty?', 'empty!', 'iterator'],
			'msl.@.@-Type': ['empty'],
			'msl.@.Map.Map': ['_', 'assoc!', '?get'],
			'msl.@.Range': ['_'],
			'msl.@.Seq.Seq': ['_', '+>!'],
			'msl.@.Seq.Stream': ['_'],
			'msl.@.Set.Set': ['_'],
			'msl.$': ['_'],
			'msl.compare': ['=?', '<?', '<=?', '>?', '>=?', 'min', 'max'],
			'msl.Generator': ['gen-next!'],
			'msl.math.methods': ['+', '-', '*', '/'],
			'msl.math.Number': ['divisible?', 'int/', 'modulo', 'neg', 'log'],
			'msl.to-string': ['_', 'inspect'],
			'msl.Type.Kind': ['_', 'kind!', 'self-kind!'],
			'msl.Type.Method': ['_', 'impl!', 'impl-for', 'self-impl!'],
			'msl.Type.Type': ['=>']
		};
		if (mslPath !== 'msl') for (let key in builtins) {
			const x = builtins[key];
			delete builtins[key];
			builtins[key.replace(/msl/g, mslPath)] = x;
		}
		return builtins;
	},
	      generateBuiltinsMap = builtins => {
		const m = new Map();
		for (const path in builtins) {
			const realPath = path.replace(/\./g, '/');
			for (let imported of builtins[path]) {
				if (imported === '_') imported = (0, _util.last)(path.split('.'));
				if (m.has(imported)) throw new Error(`Builtin ${ imported } defined more than once.`);
				m.set(imported, realPath);
			}
		}
		return m;
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbXBpbGVPcHRpb25zLmpzIiwicHJpdmF0ZS9Db21waWxlT3B0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUNNZSxPQUFNLGNBQWMsQ0FBQztBQUNuQyxhQUFXLENBQUMsSUFBSSxFQUFFO0FBQ2pCLFNBQU0sTUFBTSxHQUFHLENBQUMsSUFBSSxFQUFFLFFBQVEsS0FBSztBQUNsQyxRQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxTQUFTLEdBQUcsUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNuRSxDQUFBOztBQUVELFNBQU0sUUFBUSxHQUFHO0FBQ2hCLG1CQUFlLEVBQUUsS0FBSztBQUN0QixvQkFBZ0IsRUFBRSxJQUFJO0FBQ3RCLGVBQVcsRUFBRSxLQUFLO0FBQ2xCLGFBQVMsRUFBRSxJQUFJO0FBQ2YsVUFBTSxFQUFFLElBQUk7QUFDWixjQUFVLEVBQUUsSUFBSTtBQUNoQixXQUFPLEVBQUUsS0FBSztBQUNkLFVBQU0sRUFBRSxJQUFJO0lBQ1osQ0FBQTs7QUFFRCxTQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7O0FBRTdFLFFBQUssTUFBTSxDQUFDLElBQUksUUFBUSxFQUN2QixNQUFNLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBOztBQUV2QixRQUFLLE1BQU0sQ0FBQyxJQUFJLElBQUksRUFDbkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ2xCLE1BQU0sSUFBSSxLQUFLLENBQUMsQ0FBQyxvQkFBb0IsR0FBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUE7O0FBRTdDLFNB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R0FBRyxDQUFDLENBQUE7QUFDcEIsV0FBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0dBQzFDO0FBQ0YsU0FBTyxRQUFRLENBQUE7RUFDZjtPQUNELG1CQUFtQixHQUFHLFFBQVEsSUFBSTtBQUNqQyxRQUFNLENBQUMsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO0FBQ25CLE9BQUssTUFBTSxJQUFJLElBQUksUUFBUSxFQUFFO0FBQzVCLFNBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFBO0FBQ3pDLFFBQUssSUFBSSxRQUFRLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQ3BDLFFBQUksUUFBUSxLQUFLLEdBQUcsRUFDbkIsUUFBUSxHQUFHLFVBbkhSLElBQUksRUFtSFMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0FBQ2pDLFFBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFDbEIsTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLFFBQVEsR0FBRSxRQUFRLEVBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFBO0FBQy9ELEtBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ3pCO0dBQ0Q7QUFDRCxTQUFPLENBQUMsQ0FBQTtFQUNSLENBQUEiLCJmaWxlIjoicHJpdmF0ZS9Db21waWxlT3B0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbCwiaW1wb3J0IHtsYXN0LCB0eXBlfSBmcm9tICcuL3V0aWwnXG5cbi8qKlxuU3RvcmVzIGBvcHRzYCBwYXJhbWV0ZXIgdG8gY29tcGlsZSBtZXRob2RzIGFuZCBzdXBwbGllcyBkZWZhdWx0cy5cblNlZSB7QGxpbmsgY29tcGlsZX0gZm9yIGRlc2NyaXB0aW9uIG9mIG9wdGlvbnMuXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcGlsZU9wdGlvbnMge1xuXHRjb25zdHJ1Y3RvcihvcHRzKSB7XG5cdFx0Y29uc3QgZGVmaW5lID0gKG5hbWUsIF9kZWZhdWx0KSA9PiB7XG5cdFx0XHR0aGlzW2BfJHtuYW1lfWBdID0gb3B0c1tuYW1lXSA9PT0gdW5kZWZpbmVkID8gX2RlZmF1bHQgOiBvcHRzW25hbWVdXG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVmYXVsdHMgPSB7XG5cdFx0XHRpbmNsdWRlQW1kZWZpbmU6IGZhbHNlLFxuXHRcdFx0aW5jbHVkZVNvdXJjZU1hcDogdHJ1ZSxcblx0XHRcdGxhenlNb2R1bGVzOiBmYWxzZSxcblx0XHRcdHVzZVN0cmljdDogdHJ1ZSxcblx0XHRcdGNoZWNrczogdHJ1ZSxcblx0XHRcdGltcG9ydEJvb3Q6IHRydWUsXG5cdFx0XHRtc2xQYXRoOiAnbXNsJyxcblx0XHRcdGluZGVudDogJ1xcdCdcblx0XHR9XG5cblx0XHRjb25zdCBhbGxPcHRzID0gbmV3IFNldChPYmplY3Qua2V5cyhkZWZhdWx0cykuY29uY2F0KFsnaW5GaWxlJywgJ2J1aWx0aW5zJ10pKVxuXG5cdFx0Zm9yIChjb25zdCBfIGluIGRlZmF1bHRzKVxuXHRcdFx0ZGVmaW5lKF8sIGRlZmF1bHRzW19dKVxuXG5cdFx0Zm9yIChjb25zdCBfIGluIG9wdHMpXG5cdFx0XHRpZiAoIWFsbE9wdHMuaGFzKF8pKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBvcHRpb24gJHtffWApXG5cblx0XHRjb25zdCBpbkZpbGUgPSBvcHRzLmluRmlsZVxuXHRcdGlmIChpbkZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKHRoaXMuX2luY2x1ZGVTb3VyY2VNYXApXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignRWl0aGVyIHN1cHBseSBgaW5GaWxlYCBvcHRpb24gb3IgbWFrZSBgaW5jbHVkZVNvdXJjZU1hcGAgZmFsc2UuJylcblx0XHR9IGVsc2Uge1xuXHRcdFx0dHlwZShpbkZpbGUsIFN0cmluZylcblx0XHRcdHRoaXMuX2luRmlsZSA9IGluRmlsZVxuXHRcdH1cblxuXHRcdGlmICghKHRoaXMuX2luZGVudCA9PT0gJ1xcdCcgfHwgMiA8PSB0aGlzLl9pbmRlbnQgJiYgdGhpcy5faW5kZW50IDw9IDgpKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBvcHRzLmluZGVudCBtdXN0IGJlICdcXHQnIG9yIGEgbnVtYmVyIDItOCwgZ290OiAke3RoaXMuX2luZGVudH1gKVxuXG5cdFx0Y29uc3QgYnVpbHRpbnMgPSBvcHRzLmJ1aWx0aW5zIHx8IGRlZmF1bHRCdWlsdGlucyh0aGlzLl9tc2xQYXRoKVxuXHRcdHRoaXMuYnVpbHRpbk5hbWVUb1BhdGggPSBnZW5lcmF0ZUJ1aWx0aW5zTWFwKGJ1aWx0aW5zKVxuXHR9XG5cblx0aW5kZW50KCkge1xuXHRcdHJldHVybiB0aGlzLl9pbmRlbnRcblx0fVxuXG5cdG1vZHVsZU5hbWUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2luRmlsZSA9PT0gdW5kZWZpbmVkID8gJ2Fub255bW91cycgOiBub0V4dChiYXNlbmFtZSh0aGlzLl9pbkZpbGUpKVxuXHR9XG5cblx0anNCYXNlTmFtZSgpIHsgcmV0dXJuIGAke3RoaXMubW9kdWxlTmFtZSgpfS5qc2AgfVxuXHRtb2R1bGVQYXRoKCkgeyByZXR1cm4gdGhpcy5faW5GaWxlIH1cblxuXHRpbmNsdWRlQ2hlY2tzKCkgeyByZXR1cm4gdGhpcy5fY2hlY2tzIH1cblxuXHRpbmNsdWRlQW1kZWZpbmUoKSB7IHJldHVybiB0aGlzLl9pbmNsdWRlQW1kZWZpbmUgfVxuXHRpbmNsdWRlU291cmNlTWFwKCkgeyByZXR1cm4gdGhpcy5faW5jbHVkZVNvdXJjZU1hcCB9XG5cdGluY2x1ZGVVc2VTdHJpY3QoKSB7IHJldHVybiB0aGlzLl91c2VTdHJpY3QgfVxuXG5cdGxhenlNb2R1bGUoKSB7IHJldHVybiB0aGlzLl9sYXp5TW9kdWxlcyB9XG5cblx0aW1wb3J0Qm9vdCgpIHsgcmV0dXJuIHRoaXMuX2ltcG9ydEJvb3QgfVxuXHRib290UGF0aCgpIHsgcmV0dXJuIGAke3RoaXMuX21zbFBhdGh9L3ByaXZhdGUvYm9vdGAgfVxufVxuXG5jb25zdFxuXHRiYXNlbmFtZSA9IHBhdGggPT5cblx0XHRsYXN0KHBhdGguc3BsaXQoJy8nKSksXG5cdGV4dG5hbWUgPSBwYXRoID0+XG5cdFx0bGFzdChwYXRoLnNwbGl0KCcuJykpLFxuXHRub0V4dCA9IHBhdGggPT5cblx0XHQvLyAtIDEgZm9yIHRoZSAnLidcblx0XHRwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aCAtIDEgLSBleHRuYW1lKHBhdGgpLmxlbmd0aCksXG5cdGRlZmF1bHRCdWlsdGlucyA9IG1zbFBhdGggPT4ge1xuXHRcdGNvbnN0IGJ1aWx0aW5zID0ge1xuXHRcdFx0Z2xvYmFsOiBbJ0FycmF5JywgJ0Jvb2xlYW4nLCAnRXJyb3InLCAnRnVuY3Rpb24nLCAnTWF0aCcsICdOdW1iZXInLCAnT2JqZWN0Jyxcblx0XHRcdFx0J1JlZ0V4cCcsICdTdHJpbmcnLCAnU3ltYm9sJ10sXG5cdFx0XHQnbXNsLkAuPyc6IFsndW4tPyddLFxuXHRcdFx0J21zbC5ALkAnOiBbJ18nLCAnLSEnLCAnYWxsPycsICdjb3VudCcsICdlbXB0eT8nLCAnZW1wdHkhJywgJ2l0ZXJhdG9yJ10sXG5cdFx0XHQnbXNsLkAuQC1UeXBlJzogWydlbXB0eSddLFxuXHRcdFx0J21zbC5ALk1hcC5NYXAnOiBbJ18nLCAnYXNzb2MhJywgJz9nZXQnXSxcblx0XHRcdCdtc2wuQC5SYW5nZSc6IFsnXyddLFxuXHRcdFx0J21zbC5ALlNlcS5TZXEnOiBbJ18nLCAnKz4hJ10sXG5cdFx0XHQnbXNsLkAuU2VxLlN0cmVhbSc6IFsnXyddLFxuXHRcdFx0J21zbC5ALlNldC5TZXQnOiBbJ18nXSxcblx0XHRcdCdtc2wuJCc6IFsnXyddLFxuXHRcdFx0J21zbC5jb21wYXJlJzogWyc9PycsICc8PycsICc8PT8nLCAnPj8nLCAnPj0/JywgJ21pbicsICdtYXgnXSxcblx0XHRcdCdtc2wuR2VuZXJhdG9yJzogWydnZW4tbmV4dCEnXSxcblx0XHRcdCdtc2wubWF0aC5tZXRob2RzJzogWycrJywgJy0nLCAnKicsICcvJ10sXG5cdFx0XHQnbXNsLm1hdGguTnVtYmVyJzogWydkaXZpc2libGU/JywgJ2ludC8nLCAnbW9kdWxvJywgJ25lZycsICdsb2cnXSxcblx0XHRcdCdtc2wudG8tc3RyaW5nJzogWydfJywgJ2luc3BlY3QnXSxcblx0XHRcdCdtc2wuVHlwZS5LaW5kJzogWydfJywgJ2tpbmQhJywgJ3NlbGYta2luZCEnXSxcblx0XHRcdCdtc2wuVHlwZS5NZXRob2QnOiBbJ18nLCAnaW1wbCEnLCAnaW1wbC1mb3InLCAnc2VsZi1pbXBsISddLFxuXHRcdFx0J21zbC5UeXBlLlR5cGUnOiBbJz0+J11cblx0XHR9XG5cdFx0aWYgKG1zbFBhdGggIT09ICdtc2wnKVxuXHRcdFx0Zm9yIChsZXQga2V5IGluIGJ1aWx0aW5zKSB7XG5cdFx0XHRcdGNvbnN0IHggPSBidWlsdGluc1trZXldXG5cdFx0XHRcdGRlbGV0ZSBidWlsdGluc1trZXldXG5cdFx0XHRcdGJ1aWx0aW5zW2tleS5yZXBsYWNlKC9tc2wvZywgbXNsUGF0aCldID0geFxuXHRcdFx0fVxuXHRcdHJldHVybiBidWlsdGluc1xuXHR9LFxuXHRnZW5lcmF0ZUJ1aWx0aW5zTWFwID0gYnVpbHRpbnMgPT4ge1xuXHRcdGNvbnN0IG0gPSBuZXcgTWFwKClcblx0XHRmb3IgKGNvbnN0IHBhdGggaW4gYnVpbHRpbnMpIHtcblx0XHRcdGNvbnN0IHJlYWxQYXRoID0gcGF0aC5yZXBsYWNlKC9cXC4vZywgJy8nKVxuXHRcdFx0Zm9yIChsZXQgaW1wb3J0ZWQgb2YgYnVpbHRpbnNbcGF0aF0pIHtcblx0XHRcdFx0aWYgKGltcG9ydGVkID09PSAnXycpXG5cdFx0XHRcdFx0aW1wb3J0ZWQgPSBsYXN0KHBhdGguc3BsaXQoJy4nKSlcblx0XHRcdFx0aWYgKG0uaGFzKGltcG9ydGVkKSlcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEJ1aWx0aW4gJHtpbXBvcnRlZH0gZGVmaW5lZCBtb3JlIHRoYW4gb25jZS5gKVxuXHRcdFx0XHRtLnNldChpbXBvcnRlZCwgcmVhbFBhdGgpXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtXG5cdH1cbiJdLCJzb3VyY2VSb290IjoiL3NyYyJ9
