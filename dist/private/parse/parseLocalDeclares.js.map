{"version":3,"sources":["private/parse/parseLocalDeclares.js"],"names":[],"mappings":"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","file":"private/parse/parseLocalDeclares.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', '../MsAst', '../Token', './checks', './parse*', './Slice'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var context_1 = require('../context');\n    var MsAst_1 = require('../MsAst');\n    var Token_1 = require('../Token');\n    var checks_1 = require('./checks');\n    var parse_1 = require('./parse*');\n    var Slice_1 = require('./Slice');\n    function parseLocalDeclares(tokens) {\n        return tokens.map(parseLocalDeclare);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = parseLocalDeclares;\n    function parseLocalDeclaresJustNames(tokens) {\n        return tokens.map(_ => MsAst_1.LocalDeclare.plain(_.loc, parseLocalName(_)));\n    }\n    exports.parseLocalDeclaresJustNames = parseLocalDeclaresJustNames;\n    function parseLocalDeclare(token) {\n        const { name, opType, kind } = parseLocalParts(token);\n        return new MsAst_1.LocalDeclare(token.loc, name, opType, kind);\n    }\n    exports.parseLocalDeclare = parseLocalDeclare;\n    function parseLocalDeclareFromSpaced(tokens) {\n        const { name, opType, kind } = parseLocalPartsFromSpaced(tokens);\n        return new MsAst_1.LocalDeclare(tokens.loc, name, opType, kind);\n    }\n    exports.parseLocalDeclareFromSpaced = parseLocalDeclareFromSpaced;\n    function parseLocalDeclaresAndMemberArgs(tokens) {\n        const declares = [], memberArgs = [];\n        for (const token of tokens) {\n            const { name, opType, kind, isMember } = parseLocalParts(token, true);\n            const declare = new MsAst_1.LocalDeclare(token.loc, name, opType, kind);\n            declares.push(declare);\n            if (isMember)\n                memberArgs.push(declare);\n        }\n        return { declares: declares, memberArgs: memberArgs };\n    }\n    exports.parseLocalDeclaresAndMemberArgs = parseLocalDeclaresAndMemberArgs;\n    function parseLocalName(token) {\n        if (Token_1.isKeyword(60, token))\n            return '_';\n        else if (token instanceof Token_1.Name)\n            return token.name;\n        else\n            throw context_1.fail(token.loc, _ => _.expectedLocalName(token));\n    }\n    exports.parseLocalName = parseLocalName;\n    function parseLocalDeclareOrFocus(tokens) {\n        if (tokens.isEmpty())\n            return MsAst_1.LocalDeclare.focus(tokens.loc);\n        else {\n            context_1.check(tokens.size() === 1, tokens.loc, _ => _.expectedOneLocal);\n            const token = tokens.head();\n            if (token instanceof Token_1.GroupSpace) {\n                const slice = Slice_1.Tokens.of(token);\n                if (Token_1.isKeyword(47, slice.head()))\n                    return MsAst_1.LocalDeclare.typedFocus(tokens.loc, parse_1.parseSpaced(slice.tail()));\n            }\n            return parseLocalDeclare(token);\n        }\n    }\n    exports.parseLocalDeclareOrFocus = parseLocalDeclareOrFocus;\n    function parseLocalParts(token, orMember = false) {\n        return token instanceof Token_1.GroupSpace ?\n            parseLocalPartsFromSpaced(Slice_1.Tokens.of(token), orMember) :\n            { name: parseLocalName(token), opType: null, kind: 0, isMember: false };\n    }\n    exports.parseLocalParts = parseLocalParts;\n    function parseLocalPartsFromSpaced(tokens, orMember = false) {\n        const [rest, kind, isMember] = Token_1.isKeyword(83, tokens.head()) ?\n            [tokens.tail(), 1, false] :\n            orMember && Token_1.isKeyword(52, tokens.head()) ?\n                [tokens.tail(), 0, true] :\n                [tokens, 0, false];\n        const name = parseLocalName(rest.head());\n        const rest2 = rest.tail();\n        const opType = Op_1.opIf(!rest2.isEmpty(), () => {\n            const colon = rest2.head();\n            checks_1.checkKeyword(47, colon);\n            const tokensType = rest2.tail();\n            checks_1.checkNonEmpty(tokensType, _ => _.expectedAfterColon);\n            return parse_1.parseSpaced(tokensType);\n        });\n        return { name: name, opType: opType, kind: kind, isMember: isMember };\n    }\n});\n"],"sourceRoot":"/source/"}