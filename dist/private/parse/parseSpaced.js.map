{"version":3,"sources":["private/parse/parseSpaced.js"],"names":[],"mappings":"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","file":"private/parse/parseSpaced.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', '../ast/Call', '../ast/Class', '../ast/Fun', '../ast/locals', '../ast/Val', '../token/Group', '../token/Keyword', '../util', './checks', './parseExpr', './parseMemberName', './parseName', './parseQuote', './parseSingle', './Slice'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var context_1 = require('../context');\n    var Call_1 = require('../ast/Call');\n    var Class_1 = require('../ast/Class');\n    var Fun_1 = require('../ast/Fun');\n    var locals_1 = require('../ast/locals');\n    var Val_1 = require('../ast/Val');\n    var Group_1 = require('../token/Group');\n    var Keyword_1 = require('../token/Keyword');\n    var util_1 = require('../util');\n    var checks_1 = require('./checks');\n    var parseExpr_1 = require('./parseExpr');\n    var parseMemberName_1 = require('./parseMemberName');\n    var parseName_1 = require('./parseName');\n    var parseQuote_1 = require('./parseQuote');\n    var parseSingle_1 = require('./parseSingle');\n    var Slice_1 = require('./Slice');\n    function parseSpaced(tokens) {\n        const h = tokens.head(), rest = tokens.tail();\n        if (h instanceof Keyword_1.default)\n            switch (h.kind) {\n                case 77: {\n                    const h2 = rest.head();\n                    if (h2 instanceof Group_1.GroupParenthesis)\n                        return new Fun_1.SimpleFun(tokens.loc, parseExpr_1.default(Slice_1.Tokens.of(h2)));\n                    else if (Keyword_1.isKeyword(94, h2)) {\n                        const tail = rest.tail();\n                        const h3 = tail.head();\n                        const fun = new Fun_1.GetterFun(h3.loc, parseMemberName_1.default(h3));\n                        return parseSpacedFold(fun, tail.tail());\n                    }\n                    else {\n                        const fun = new Fun_1.MemberFun(h2.loc, null, parseMemberName_1.default(h2));\n                        return parseSpacedFold(fun, rest.tail());\n                    }\n                }\n                case 94: {\n                    const h2 = rest.head();\n                    if (Keyword_1.isKeyword(77, h2)) {\n                        const tail = rest.tail();\n                        const h3 = tail.head();\n                        const name = parseMemberName_1.default(h3);\n                        const fun = new Fun_1.MemberFun(h2.loc, locals_1.LocalAccess.this(h2.loc), name);\n                        return parseSpacedFold(fun, tail.tail());\n                    }\n                    else {\n                        const name = parseMemberName_1.default(rest.head());\n                        const member = new Val_1.Member(h.loc, locals_1.LocalAccess.this(h.loc), name);\n                        return parseSpacedFold(member, rest.tail());\n                    }\n                }\n                case 96:\n                    return new Call_1.Spread(tokens.loc, parseSpacedFold(parseSingle_1.default(rest.head()), rest.tail()));\n                case 125:\n                    return new Val_1.Lazy(h.loc, parseSpaced(rest));\n                case 142: {\n                    const h2 = rest.head();\n                    if (Keyword_1.isKeyword(94, h2)) {\n                        const tail = rest.tail();\n                        const sup = new Class_1.SuperMember(h2.loc, parseMemberName_1.default(tail.head()));\n                        return parseSpacedFold(sup, tail.tail());\n                    }\n                    else if (h2 instanceof Group_1.GroupParenthesis && Slice_1.Tokens.of(h2).isEmpty()) {\n                        const x = new Class_1.SuperCall(h2.loc, []);\n                        return parseSpacedFold(x, rest.tail());\n                    }\n                    else\n                        throw context_1.fail(h2.loc, _ => _.tokenAfterSuper);\n                }\n                case 145: {\n                    const h2 = rest.head();\n                    const quote = new Val_1.QuoteSimple(h2.loc, parseName_1.default(h2));\n                    return parseSpacedFold(quote, rest.tail());\n                }\n                case 89:\n                    return new Val_1.InstanceOf(h.loc, locals_1.LocalAccess.focus(h.loc), parseSpaced(rest));\n                default:\n            }\n        return parseSpacedFold(parseSingle_1.default(h, true), rest);\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = parseSpaced;\n    function parseSpacedFold(start, rest) {\n        let acc = start;\n        for (let i = rest.start; i < rest.end; i = i + 1) {\n            function restVal() {\n                return parseSpaced(rest.chopStart(i + 1));\n            }\n            const token = rest.tokens[i];\n            const loc = token.loc;\n            if (token instanceof Keyword_1.default)\n                switch (token.kind) {\n                    case 77:\n                        if (i === rest.end - 1)\n                            throw checks_1.unexpected(token);\n                        i = i + 1;\n                        acc = new Fun_1.MemberFun(token.loc, acc, parseMemberName_1.default(rest.tokens[i]));\n                        break;\n                    case 94: {\n                        util_1.assert(i < rest.end - 1);\n                        i = i + 1;\n                        acc = new Val_1.Member(token.loc, acc, parseMemberName_1.default(rest.tokens[i]));\n                        break;\n                    }\n                    case 95:\n                        context_1.check(i < rest.end - 1, token.loc, _ => _.infiniteRange);\n                        return new Val_1.Range(token.loc, acc, restVal(), false);\n                    case 96:\n                        return new Val_1.Range(token.loc, acc, Op_1.opIf(i < rest.end - 1, restVal), true);\n                    case 102:\n                        acc = new Call_1.default(token.loc, acc, [locals_1.LocalAccess.focus(loc)]);\n                        break;\n                    case 89:\n                        return new Val_1.InstanceOf(token.loc, acc, restVal());\n                    default:\n                        throw checks_1.unexpected(token);\n                }\n            else if (token instanceof Group_1.GroupBracket)\n                acc = new Val_1.Sub(loc, acc, parseExpr_1.parseExprParts(Slice_1.Tokens.of(token)));\n            else if (token instanceof Group_1.GroupParenthesis) {\n                checks_1.checkEmpty(Slice_1.Tokens.of(token), _ => _.parensOutsideCall);\n                acc = new Call_1.default(loc, acc, []);\n            }\n            else if (token instanceof Group_1.GroupQuote)\n                acc = new Val_1.QuoteTaggedTemplate(loc, acc, parseQuote_1.default(Slice_1.default.of(token)));\n            else\n                throw checks_1.unexpected(token);\n        }\n        return acc;\n    }\n});\n"],"sourceRoot":"/source/"}