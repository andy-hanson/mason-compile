{"version":3,"sources":["private/verify/verifyModule.js"],"names":[],"mappings":"AAAA,CAAC,UAAU,OAAO,EAAE;AAChB,QAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,EAAE;AAClE,YAAI,CAAC,GAAG,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,AAAC,IAAI,CAAC,KAAK,SAAS,EAAE,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;KAC9E,MACI,IAAI,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,GAAG,EAAE;AACjD,cAAM,CAAC,CAAC,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,YAAY,EAAE,WAAW,EAAE,UAAU,EAAE,eAAe,EAAE,sBAAsB,CAAC,EAAE,OAAO,CAAC,CAAC;KACpI;CACJ,CAAA,CAAE,UAAU,OAAO,EAAE,OAAO,EAAE;AAC3B,gBAAY,CAAC;;AACb,QAAI,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC5B,QAAI,SAAS,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACtC,QAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACrC,QAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,QAAI,aAAa,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC7C,QAAI,oBAAoB,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;AAC3D,aAAS,YAAY,OAA0B;YAAvB,OAAO,QAAP,OAAO;YAAE,KAAK,QAAL,KAAK;YAAE,GAAG,QAAH,GAAG;;AACvC,aAAK,MAAM,CAAC,IAAI,OAAO,EACnB,YAAY,CAAC,CAAC,CAAC,CAAC;AACpB,iBAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,UAAU,EAAE,MAAM;AACvD,yBAAa,CAAC,iBAAiB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;SAC/C,CAAC,CAAC;KACN;AACD,UAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,WAAO,CAAC,OAAO,GAAG,YAAY,CAAC;AAC/B,aAAS,YAAY,QAAgC;YAA7B,QAAQ,SAAR,QAAQ;YAAE,eAAe,SAAf,eAAe;;AAC7C,iBAAS,WAAW,CAAC,EAAE,EAAE;AACrB,kBAAM,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AAC3C,qBAAS,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACvF,gCAAoB,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;AAC5C,oBAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;SACzB;AACD,aAAK,MAAM,CAAC,IAAI,QAAQ,EACpB,WAAW,CAAC,CAAC,CAAC,CAAC;AACnB,YAAI,CAAC,MAAM,CAAC,eAAe,EAAE,WAAW,CAAC,CAAC;KAC7C;CACJ,CAAC,CAAC","file":"private/verify/verifyModule.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', './context', './locals', './verifyBlock', './verifyLocalDeclare'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var context_1 = require('../context');\n    var context_2 = require('./context');\n    var locals_1 = require('./locals');\n    var verifyBlock_1 = require('./verifyBlock');\n    var verifyLocalDeclare_1 = require('./verifyLocalDeclare');\n    function verifyModule({ imports, lines, loc }) {\n        for (const _ of imports)\n            verifyImport(_);\n        context_2.withName(context_1.pathOptions.moduleName, () => {\n            verifyBlock_1.verifyModuleLines(lines, loc);\n        });\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = verifyModule;\n    function verifyImport({ imported, opImportDefault }) {\n        function addUseLocal(ld) {\n            const prev = context_2.locals.get(ld.name);\n            context_1.check(prev === undefined, ld.loc, _ => _.duplicateImport(ld.name, prev.loc));\n            verifyLocalDeclare_1.verifyLocalDeclare(ld);\n            locals_1.setLocal(ld);\n        }\n        for (const _ of imported)\n            addUseLocal(_);\n        Op_1.opEach(opImportDefault, addUseLocal);\n    }\n});\n"],"sourceRoot":"/source/"}