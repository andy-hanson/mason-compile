{"version":3,"sources":["private/verify/verifyClass.js"],"names":[],"mappings":"AAAA,CAAC,UAAU,OAAO,EAAE;AAChB,QAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,EAAE;AAClE,YAAI,CAAC,GAAG,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,AAAC,IAAI,CAAC,KAAK,SAAS,EAAE,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;KAC9E,MACI,IAAI,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,GAAG,EAAE;AACjD,cAAM,CAAC,CAAC,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,YAAY,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE,wBAAwB,EAAE,aAAa,CAAC,EAAE,OAAO,CAAC,CAAC;KAC9I;CACJ,CAAA,CAAE,UAAU,OAAO,EAAE,OAAO,EAAE;AAC3B,gBAAY,CAAC;;AACb,QAAI,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC5B,QAAI,SAAS,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACtC,QAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACrC,QAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,QAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,QAAI,sBAAsB,GAAG,OAAO,CAAC,wBAAwB,CAAC,CAAC;AAC/D,QAAI,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AACzC,aAAS,WAAW,CAAC,CAAC,EAAE;cACZ,QAAQ,GAAkE,CAAC,CAA3E,QAAQ;cAAE,YAAY,GAAoD,CAAC,CAAjE,YAAY;cAAE,MAAM,GAA4C,CAAC,CAAnD,MAAM;cAAE,IAAI,GAAsC,CAAC,CAA3C,IAAI;cAAE,OAAO,GAA6B,CAAC,CAArC,OAAO;cAAE,aAAa,GAAc,CAAC,CAA5B,aAAa;cAAE,OAAO,GAAK,CAAC,CAAb,OAAO;;AAC7E,YAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,IAAI;AAC5B,iBAAK,MAAM,CAAC,IAAI,MAAM,EAClB,WAAW,CAAC,CAAC,CAAC,CAAC;SACtB,CAAC,CAAC;AACH,mBAAW,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;AACtC,mBAAW,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AAClC,iBAAS,CAAC,QAAQ,CAAC,MAAM;AACrB,gBAAI,CAAC,MAAM,CAAC,IAAI,EAAE,sBAAsB,CAAC,kBAAkB,CAAC,CAAC;SAChE,CAAC,CAAC;AACH,iBAAS,CAAC,WAAW,CAAC,MAAM;AACxB,iBAAK,MAAM,CAAC,IAAI,OAAO,EACnB,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AACtC,gBAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,IAAI,iBAAiB,CAAC,CAAC,EAAE,YAAY,KAAK,IAAI,CAAC,CAAC,CAAC;AAC7E,iBAAK,MAAM,CAAC,IAAI,OAAO,EACnB,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SACzC,CAAC,CAAC;KACN;AACD,UAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,WAAO,CAAC,OAAO,GAAG,WAAW,CAAC;AAC9B,aAAS,iBAAiB,CAAC,CAAC,EAAE,aAAa,EAAE;cACjC,GAAG,GAAsB,CAAC,CAA1B,GAAG;cAAE,GAAG,GAAiB,CAAC,CAArB,GAAG;cAAE,UAAU,GAAK,CAAC,CAAhB,UAAU;;AAC5B,cAAM,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC;AACxD,iBAAS,CAAC,UAAU,CAAC,CAAC,EAAE,MAAM,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;AACxD,cAAM,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC9D,YAAI,aAAa,EACb,SAAS,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,KAElE,SAAS,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,EAAE,MAAM,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC;AACzF,aAAK,MAAM,GAAG,IAAI,UAAU,EACxB,QAAQ,CAAC,kBAAkB,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;KAC3C;AACD,aAAS,WAAW,CAAC,CAAC,EAAE;AACpB,mBAAW,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;KACrC;CACJ,CAAC,CAAC","file":"private/verify/verifyClass.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', './context', './locals', './util', './verifyMethodImplLike', './verifyVal'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var context_1 = require('../context');\n    var context_2 = require('./context');\n    var locals_1 = require('./locals');\n    var util_1 = require('./util');\n    var verifyMethodImplLike_1 = require('./verifyMethodImplLike');\n    var verifyVal_1 = require('./verifyVal');\n    function verifyClass(_) {\n        const { opFields, opSuperClass, traits, opDo, statics, opConstructor, methods } = _;\n        Op_1.opEach(opFields, fields => {\n            for (const _ of fields)\n                verifyField(_);\n        });\n        verifyVal_1.verifyOpVal(opSuperClass);\n        verifyVal_1.verifyEachVal(traits);\n        context_2.withIife(() => {\n            Op_1.opEach(opDo, verifyMethodImplLike_1.verifyClassTraitDo);\n        });\n        context_2.withMethods(() => {\n            for (const _ of statics)\n                verifyMethodImplLike_1.default(_);\n            Op_1.opEach(opConstructor, _ => verifyConstructor(_, opSuperClass !== null));\n            for (const _ of methods)\n                verifyMethodImplLike_1.default(_);\n        });\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = verifyClass;\n    function verifyConstructor(_, classHasSuper) {\n        const { loc, fun, memberArgs } = _;\n        util_1.makeUseOptional(Op_1.orThrow(fun.opDeclareThis));\n        context_2.withMethod(_, () => verifyVal_1.default(fun));\n        const superCall = context_2.results.constructorToSuper.get(_);\n        if (classHasSuper)\n            context_1.check(superCall !== undefined, loc, _ => _.superNeeded);\n        else\n            context_1.check(superCall === undefined, () => superCall.loc, _ => _.superForbidden);\n        for (const arg of memberArgs)\n            locals_1.setDeclareAccessed(arg, _);\n    }\n    function verifyField(_) {\n        verifyVal_1.verifyOpVal(_.opType);\n    }\n});\n"],"sourceRoot":"/source/"}