{"version":3,"sources":["private/transpile/transpileFor.js"],"names":[],"mappings":"AAAA,CAAC,UAAU,OAAO,EAAE;AAChB,QAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,EAAE;AAClE,YAAI,CAAC,GAAG,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,AAAC,IAAI,CAAC,KAAK,SAAS,EAAE,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;KAC9E,MACI,IAAI,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,GAAG,EAAE;AACjD,cAAM,CAAC,CAAC,SAAS,EAAE,SAAS,EAAE,uBAAuB,EAAE,sBAAsB,EAAE,oBAAoB,EAAE,sBAAsB,EAAE,qBAAqB,EAAE,OAAO,EAAE,WAAW,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,QAAQ,CAAC,EAAE,OAAO,CAAC,CAAC;KAC/Q;CACJ,CAAA,CAAE,UAAU,OAAO,EAAE,OAAO,EAAE;AAC3B,gBAAY,CAAC;;AACb,QAAI,aAAa,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC;AACrD,QAAI,YAAY,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACnD,QAAI,UAAU,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAC/C,QAAI,YAAY,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACnD,QAAI,WAAW,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACjD,QAAI,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC5B,QAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACrC,QAAI,iBAAiB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACrD,QAAI,gBAAgB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACnD,QAAI,eAAe,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACjD,QAAI,cAAc,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC/C,QAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,aAAS,oBAAoB,OAAwB;YAArB,UAAU,QAAV,UAAU;YAAE,KAAK,QAAL,KAAK;;AAC7C,eAAO,MAAM,CAAC,kBAAkB,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC;KAChE;AACD,WAAO,CAAC,oBAAoB,GAAG,oBAAoB,CAAC;AACpD,aAAS,mBAAmB,CAAC,CAAC,EAAE;cACpB,UAAU,GAAY,CAAC,CAAvB,UAAU;cAAE,KAAK,GAAK,CAAC,CAAX,KAAK;;AACzB,eAAO,cAAc,CAAC,CAAC,EAAE,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC;KACxD;AACD,WAAO,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;AAClD,aAAS,yBAAyB,QAAwC;mCAArC,QAAQ;YAAI,OAAO,kBAAP,OAAO;YAAE,GAAG,kBAAH,GAAG;YAAI,KAAK,SAAL,KAAK;;AAClE,cAAM,IAAI,GAAG,IAAI,UAAU,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC,eAAe,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,EAAE,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;AAC7J,eAAO,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;KACnE;AACD,WAAO,CAAC,yBAAyB,GAAG,yBAAyB,CAAC;AAC9D,aAAS,wBAAwB,CAAC,CAAC,EAAE;AACjC,eAAO,IAAI,WAAW,CAAC,mBAAmB,CAAC,IAAI,YAAY,CAAC,eAAe,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KAC9G;AACD,WAAO,CAAC,wBAAwB,GAAG,wBAAwB,CAAC;AAC5D,aAAS,oBAAoB,CAAC,CAAC,EAAE;cACrB,UAAU,GAAY,CAAC,CAAvB,UAAU;cAAE,KAAK,GAAK,CAAC,CAAX,KAAK;;AACzB,cAAM,IAAI,GAAG,cAAc,CAAC,CAAC,EAAE,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC;AAC3D,eAAO,MAAM,CAAC,SAAS,CAAC,IAAI,WAAW,CAAC,cAAc,CAAC,CAAC,iBAAiB,CAAC,eAAe,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;KACnH;AACD,WAAO,CAAC,oBAAoB,GAAG,oBAAoB,CAAC;AACpD,aAAS,mBAAmB,CAAC,CAAC,EAAE;AAC5B,eAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,WAAW,CAAC,eAAe,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,IAAI,WAAW,CAAC,cAAc,CAAC,SAAS,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC;KACpM;AACD,WAAO,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;AAClD,aAAS,OAAO,CAAC,UAAU,EAAE,KAAK,EAAE;AAChC,cAAM,QAAQ,GAAG,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACjD,eAAO,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;gBAAG,OAAO,SAAP,OAAO;gBAAE,GAAG,SAAH,GAAG;mBAAO,IAAI,WAAW,CAAC,cAAc,CAAC,IAAI,aAAa,CAAC,sBAAsB,CAAC,CAAC,IAAI,aAAa,CAAC,kBAAkB,CAAC,eAAe,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC;SAAA,EAAE,MAAM,IAAI,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;KACjU;AACD,aAAS,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE;AAC/B,eAAO,SAAS,CAAC,aAAa,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,IAAI,WAAW,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC;KAC9G;AACD,UAAM,MAAM,GAAG,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAChD,UAAM,WAAW,GAAG,IAAI,WAAW,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;CAClF,CAAC,CAAC","file":"private/transpile/transpileFor.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'esast/lib/Declaration', 'esast/lib/Expression', 'esast/lib/Function', 'esast/lib/Identifier', 'esast/lib/Statement', 'op/Op', './context', './esast-constants', './transpileBlock', './transpileMisc', './transpileVal', './util'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Declaration_1 = require('esast/lib/Declaration');\n    var Expression_1 = require('esast/lib/Expression');\n    var Function_1 = require('esast/lib/Function');\n    var Identifier_1 = require('esast/lib/Identifier');\n    var Statement_1 = require('esast/lib/Statement');\n    var Op_1 = require('op/Op');\n    var context_1 = require('./context');\n    var esast_constants_1 = require('./esast-constants');\n    var transpileBlock_1 = require('./transpileBlock');\n    var transpileMisc_1 = require('./transpileMisc');\n    var transpileVal_1 = require('./transpileVal');\n    var util_1 = require('./util');\n    function transpileForValNoLoc({ opIteratee, block }) {\n        return util_1.blockWrapStatement(forLoop(opIteratee, block));\n    }\n    exports.transpileForValNoLoc = transpileForValNoLoc;\n    function transpileForDoNoLoc(_) {\n        const { opIteratee, block } = _;\n        return maybeLabelLoop(_, forLoop(opIteratee, block));\n    }\n    exports.transpileForDoNoLoc = transpileForDoNoLoc;\n    function transpileForAsyncValNoLoc({ iteratee: { element, bag }, block }) {\n        const func = new Function_1.FunctionExpression(null, [transpileMisc_1.transpileLocalDeclare(element)], transpileBlock_1.default(block), { generator: true });\n        return util_1.msCall('$for', transpileVal_1.default(bag), func);\n    }\n    exports.transpileForAsyncValNoLoc = transpileForAsyncValNoLoc;\n    function transpileForAsyncDoNoLoc(_) {\n        return new Statement_1.ExpressionStatement(new Expression_1.YieldExpression(transpileForAsyncValNoLoc(_)));\n    }\n    exports.transpileForAsyncDoNoLoc = transpileForAsyncDoNoLoc;\n    function transpileForBagNoLoc(_) {\n        const { opIteratee, block } = _;\n        const loop = maybeLabelLoop(_, forLoop(opIteratee, block));\n        return util_1.blockWrap(new Statement_1.BlockStatement([esast_constants_1.DeclareBuiltBag, loop, ReturnBuilt]));\n    }\n    exports.transpileForBagNoLoc = transpileForBagNoLoc;\n    function transpileBreakNoLoc(_) {\n        return Op_1.caseOp(_.opValue, _ => new Statement_1.ReturnStatement(transpileVal_1.default(_)), () => new Statement_1.BreakStatement(context_1.verifyResults.isBreakInSwitch(_) ? IdLoop : null));\n    }\n    exports.transpileBreakNoLoc = transpileBreakNoLoc;\n    function forLoop(opIteratee, block) {\n        const blockAst = transpileBlock_1.default(block);\n        return Op_1.caseOp(opIteratee, ({ element, bag }) => new Statement_1.ForOfStatement(new Declaration_1.VariableDeclarationLet([new Declaration_1.VariableDeclarator(transpileMisc_1.transpileLocalDeclare(element))]), transpileVal_1.default(bag), blockAst), () => new Statement_1.ForStatement(null, null, null, blockAst));\n    }\n    function maybeLabelLoop(ast, loop) {\n        return context_1.verifyResults.loopNeedsLabel(ast) ? new Statement_1.LabeledStatement(IdLoop, loop) : loop;\n    }\n    const IdLoop = new Identifier_1.default('loop');\n    const ReturnBuilt = new Statement_1.ReturnStatement(esast_constants_1.IdBuilt);\n});\n"],"sourceRoot":"/source/"}