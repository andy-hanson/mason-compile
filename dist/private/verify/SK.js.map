{"version":3,"sources":["private/verify/SK.js"],"names":[],"mappings":"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","file":"private/verify/SK.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', '../MsAst', '../util', './autoBlockKind', './context'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var context_1 = require('../context');\n    var MsAstTypes = require('../MsAst');\n    var util_1 = require('../util');\n    var autoBlockKind_1 = require('./autoBlockKind');\n    var context_2 = require('./context');\n    function checkDo(_, sk) {\n        context_1.check(sk === 0, _.loc, _ => _.statementAsValue);\n    }\n    exports.checkDo = checkDo;\n    function checkVal(_, sk) {\n        if (sk === 0)\n            context_1.warn(_.loc, _ => _.valueAsStatement);\n    }\n    exports.checkVal = checkVal;\n    function markStatement(_, sk) {\n        if (sk === 0)\n            context_2.results.statements.add(_);\n    }\n    exports.markStatement = markStatement;\n    function getSK(_) {\n        return Op_1.orDefault(_.opSK(), () => 1);\n    }\n    exports.getSK = getSK;\n    util_1.implementMany(MsAstTypes, 'opSK', {\n        DoOnly() {\n            return 0;\n        },\n        ValOnly() {\n            return 1;\n        },\n        Call() {\n            return null;\n        },\n        Del() {\n            return null;\n        },\n        Yield() {\n            return null;\n        },\n        YieldTo() {\n            return null;\n        },\n        Block() {\n            const { lines, loc } = this;\n            return autoBlockKind_1.default(lines, loc) === 2 ?\n                util_1.isEmpty(lines) ? 0 : util_1.last(lines).opSK() :\n                1;\n        },\n        Conditional() {\n            return this.result.opSK();\n        },\n        Except() {\n            const catches = this.allCatches.map((_) => _.block);\n            const parts = Op_1.caseOp(this.opElse, _ => util_1.cat(_, catches), () => util_1.cat(this.try, catches));\n            return compositeSK(this.loc, parts);\n        },\n        For() {\n            return Op_1.orDefault(this.block.opForSK(), () => 0);\n        },\n        Case: caseSwitchSK,\n        Switch: caseSwitchSK\n    });\n    function caseSwitchSK() {\n        return compositeSK(this.loc, caseSwitchParts(this));\n    }\n    util_1.implementMany(MsAstTypes, 'opForSK', {\n        default() {\n            return null;\n        },\n        Break() {\n            return this.opValue === null ? 0 : 1;\n        },\n        Block() {\n            return util_1.isEmpty(this.lines) ? null : compositeForSK(this.loc, this.lines);\n        },\n        Conditional() {\n            return this.result.opForSK();\n        },\n        Case: caseSwitchForSK,\n        Except() {\n            const catches = this.allCatches.map((_) => _.block);\n            return compositeForSK(this.loc, util_1.cat(this.try, catches, this.opElse, this.opFinally));\n        },\n        Switch: caseSwitchForSK\n    });\n    function caseSwitchForSK() {\n        return compositeForSK(this.loc, caseSwitchParts(this));\n    }\n    function caseSwitchParts(_) {\n        return util_1.cat(_.parts.map((_) => _.result), _.opElse);\n    }\n    function compositeSK(loc, parts) {\n        return composite(loc, _ => _.opSK(), parts, _ => _.ambiguousSK);\n    }\n    function compositeForSK(loc, parts) {\n        return composite(loc, _ => _.opForSK(), parts, _ => _.ambiguousForSK);\n    }\n    function composite(loc, method, parts, errorMessage) {\n        let opSk = method(parts[0]);\n        for (let i = 1; i < parts.length; i = i + 1) {\n            const otherSK = method(parts[i]);\n            if (opSk === null)\n                opSk = otherSK;\n            else\n                context_1.check(otherSK === null || otherSK === opSk, loc, errorMessage);\n        }\n        return opSk;\n    }\n});\n"],"sourceRoot":"/source/"}