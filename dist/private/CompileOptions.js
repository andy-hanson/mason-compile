if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports', 'module', './util'], function (exports, module, _util) {
	'use strict';

	class CompileOptions {
		constructor() {
			let opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

			if (opts === undefined) opts = {};
			(0, _util.type)(opts, Object);

			const define = (name, _default) => {
				const getDefault = () => {
					const _ = opts[name];
					if (_ === undefined) return _default;else {
						(0, _util.type)(_, _default.constructor);
						return _;
					}
				};
				this[`_${ name }`] = getDefault();
			};

			const defaults = {
				includeAmdefine: false,
				includeSourceMap: true,
				includeModuleName: true,
				lazyModules: true,
				useStrict: true,
				checks: true,
				'warn-as-error': false,
				importBoot: true,
				mslPath: 'msl'
			};

			const allOpts = new Set(Object.keys(defaults).concat(['inFile', 'builtins']));

			for (const _ in defaults) define(_, defaults[_]);

			for (const _ in opts) if (!allOpts.has(_)) throw new Error(`Unrecognized key ${ _ }`);

			const inFile = opts.inFile;
			if (inFile === undefined) {
				if (this._includeSourceMap) throw new Error('Either supply `inFile` option or make `includeSourceMap` false.');
				if (this._includeModuleName) throw new Error('Either supply `inFile` option or make `includeModuleName` false.');
			} else {
				(0, _util.type)(inFile, String);
				this._inFile = inFile;
			}

			const builtins = opts.builtins || defaultBuiltins(this._mslPath);
			this.builtinNameToPath = generateBuiltinsMap(builtins);
		}

		moduleName() {
			return this._inFile === undefined ? 'anonymous' : noExt(basename(this._inFile));
		}

		jsBaseName() {
			return `${ this.moduleName() }.js`;
		}
		modulePath() {
			return this._inFile;
		}

		includeChecks() {
			return this._checks;
		}

		warnAsError() {
			return this['_warn-as-error'];
		}

		includeAmdefine() {
			return this._includeAmdefine;
		}
		includeSourceMap() {
			return this._includeSourceMap;
		}
		includeModuleName() {
			return this._includeModuleName;
		}
		includeUseStrict() {
			return this._useStrict;
		}

		lazyModule() {
			return !this._lazyModules;
		}

		importBoot() {
			return this._importBoot;
		}
		bootPath() {
			return `${ this._mslPath }/private/boot`;
		}
	}

	module.exports = CompileOptions;

	const basename = path => (0, _util.last)(path.split('/')),
	      extname = path => (0, _util.last)(path.split('.')),
	      noExt = path =>
	// - 1 for the '.'
	path.substring(0, path.length - 1 - extname(path).length),
	      defaultBuiltins = mslPath => {
		const builtins = {
			global: ['Array', 'Boolean', 'Error', 'Function', 'Math', 'Number', 'Object', 'RegExp', 'String', 'Symbol'],
			'msl.@.?': ['un-?'],
			'msl.@.@': ['_', '-!', 'all?', 'count', 'empty?', 'empty!', 'iterator'],
			'msl.@.@-Type': ['empty'],
			'msl.@.Map.Map': ['_', 'assoc!', '?get'],
			'msl.@.Range': ['_'],
			'msl.@.Seq.Seq': ['_', '+>!'],
			'msl.@.Seq.Stream': ['_'],
			'msl.@.Set.Set': ['_'],
			'msl.$': ['_'],
			'msl.compare': ['=?', '<?', '<=?', '>?', '>=?', 'min', 'max'],
			'msl.Generator': ['gen-next!'],
			'msl.math.methods': ['+', '-', '*', '/'],
			'msl.math.Number': ['divisible?', 'int/', 'modulo', 'neg', 'log'],
			'msl.to-string': ['_', 'inspect'],
			'msl.Type.Kind': ['_', 'kind!', 'self-kind!'],
			'msl.Type.Method': ['_', 'impl!', 'impl-for', 'self-impl!'],
			'msl.Type.Type': ['=>']
		};
		if (mslPath !== 'msl') for (let key in builtins) {
			const x = builtins[key];
			delete builtins[key];
			builtins[key.replace(/msl/g, mslPath)] = x;
		}
		return builtins;
	},
	      generateBuiltinsMap = builtins => {
		const m = new Map();
		for (const path in builtins) {
			const realPath = path.replace(/\./g, '/');
			for (let imported of builtins[path]) {
				if (imported === '_') imported = (0, _util.last)(path.split('.'));
				if (m.has(imported)) throw new Error(`Builtin ${ imported } defined more than once.`);
				m.set(imported, realPath);
			}
		}
		return m;
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbXBpbGVPcHRpb25zLmpzIiwicHJpdmF0ZS9Db21waWxlT3B0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDRWUsT0FBTSxjQUFjLENBQUM7QUFDbkMsYUFBVyxHQUFZO09BQVgsSUFBSSx5REFBRyxFQUFFOztBQUNwQixPQUFJLElBQUksS0FBSyxTQUFTLEVBQUUsSUFBSSxHQUFHLEVBQUUsQ0FBQTtBQUNqQyxhQUxZLElBQUksRUFLWCxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUE7O0FBRWxCLFNBQU0sTUFBTSxHQUFHLENBQUMsSUFBSSxFQUFFLFFBQVEsS0FBSztBQUNsQyxVQUFNLFVBQVUsR0FBRyxNQUFNO0FBQ3hCLFdBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUNwQixTQUFJLENBQUMsS0FBSyxTQUFTLEVBQ2xCLE9BQU8sUUFBUSxDQUFBLEtBQ1g7QUFDSixnQkFiUyxJQUFJLEVBYVIsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQTtBQUM3QixhQUFPLENBQUMsQ0FBQTtNQUNSO0tBQ0QsQ0FBQTtBQUNELFFBQUksQ0FBQyxDQUFDLENBQUMsR0FBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUE7SUFDL0IsQ0FBQTs7QUFFRCxTQUFNLFFBQVEsR0FBRztBQUNoQixtQkFBZSxFQUFFLEtBQUs7QUFDdEIsb0JBQWdCLEVBQUUsSUFBSTtBQUN0QixxQkFBaUIsRUFBRSxJQUFJO0FBQ3ZCLGVBQVcsRUFBRSxJQUFJO0FBQ2pCLGFBQVMsRUFBRSxJQUFJO0FBQ2YsVUFBTSxFQUFFLElBQUk7QUFDWixtQkFBZSxFQUFFLEtBQUs7QUFDdEIsY0FBVSxFQUFFLElBQUk7QUFDaEIsV0FBTyxFQUFFLEtBQUs7SUFDZCxDQUFBOztBQUVELFNBQU0sT0FBTyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFB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dGUvQ29tcGlsZU9wdGlvbnMuanMiLCJzb3VyY2VzQ29udGVudCI6W251bGwsImltcG9ydCB7bGFzdCwgdHlwZX0gZnJvbSAnLi91dGlsJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21waWxlT3B0aW9ucyB7XG5cdGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuXHRcdGlmIChvcHRzID09PSB1bmRlZmluZWQpIG9wdHMgPSB7fVxuXHRcdHR5cGUob3B0cywgT2JqZWN0KVxuXG5cdFx0Y29uc3QgZGVmaW5lID0gKG5hbWUsIF9kZWZhdWx0KSA9PiB7XG5cdFx0XHRjb25zdCBnZXREZWZhdWx0ID0gKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBfID0gb3B0c1tuYW1lXVxuXHRcdFx0XHRpZiAoXyA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdHJldHVybiBfZGVmYXVsdFxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHR0eXBlKF8sIF9kZWZhdWx0LmNvbnN0cnVjdG9yKVxuXHRcdFx0XHRcdHJldHVybiBfXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXNbYF8ke25hbWV9YF0gPSBnZXREZWZhdWx0KClcblx0XHR9XG5cblx0XHRjb25zdCBkZWZhdWx0cyA9IHtcblx0XHRcdGluY2x1ZGVBbWRlZmluZTogZmFsc2UsXG5cdFx0XHRpbmNsdWRlU291cmNlTWFwOiB0cnVlLFxuXHRcdFx0aW5jbHVkZU1vZHVsZU5hbWU6IHRydWUsXG5cdFx0XHRsYXp5TW9kdWxlczogdHJ1ZSxcblx0XHRcdHVzZVN0cmljdDogdHJ1ZSxcblx0XHRcdGNoZWNrczogdHJ1ZSxcblx0XHRcdCd3YXJuLWFzLWVycm9yJzogZmFsc2UsXG5cdFx0XHRpbXBvcnRCb290OiB0cnVlLFxuXHRcdFx0bXNsUGF0aDogJ21zbCdcblx0XHR9XG5cblx0XHRjb25zdCBhbGxPcHRzID0gbmV3IFNldChPYmplY3Qua2V5cyhkZWZhdWx0cykuY29uY2F0KFsnaW5GaWxlJywgJ2J1aWx0aW5zJ10pKVxuXG5cdFx0Zm9yIChjb25zdCBfIGluIGRlZmF1bHRzKVxuXHRcdFx0ZGVmaW5lKF8sIGRlZmF1bHRzW19dKVxuXG5cdFx0Zm9yIChjb25zdCBfIGluIG9wdHMpXG5cdFx0XHRpZiAoIWFsbE9wdHMuaGFzKF8pKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXkgJHtffWApXG5cblx0XHRjb25zdCBpbkZpbGUgPSBvcHRzLmluRmlsZVxuXHRcdGlmIChpbkZpbGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKHRoaXMuX2luY2x1ZGVTb3VyY2VNYXApXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignRWl0aGVyIHN1cHBseSBgaW5GaWxlYCBvcHRpb24gb3IgbWFrZSBgaW5jbHVkZVNvdXJjZU1hcGAgZmFsc2UuJylcblx0XHRcdGlmICh0aGlzLl9pbmNsdWRlTW9kdWxlTmFtZSlcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFaXRoZXIgc3VwcGx5IGBpbkZpbGVgIG9wdGlvbiBvciBtYWtlIGBpbmNsdWRlTW9kdWxlTmFtZWAgZmFsc2UuJylcblx0XHR9IGVsc2Uge1xuXHRcdFx0dHlwZShpbkZpbGUsIFN0cmluZylcblx0XHRcdHRoaXMuX2luRmlsZSA9IGluRmlsZVxuXHRcdH1cblxuXHRcdGNvbnN0IGJ1aWx0aW5zID0gb3B0cy5idWlsdGlucyB8fCBkZWZhdWx0QnVpbHRpbnModGhpcy5fbXNsUGF0aClcblx0XHR0aGlzLmJ1aWx0aW5OYW1lVG9QYXRoID0gZ2VuZXJhdGVCdWlsdGluc01hcChidWlsdGlucylcblx0fVxuXG5cdG1vZHVsZU5hbWUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2luRmlsZSA9PT0gdW5kZWZpbmVkID8gJ2Fub255bW91cycgOiBub0V4dChiYXNlbmFtZSh0aGlzLl9pbkZpbGUpKVxuXHR9XG5cblx0anNCYXNlTmFtZSgpIHsgcmV0dXJuIGAke3RoaXMubW9kdWxlTmFtZSgpfS5qc2AgfVxuXHRtb2R1bGVQYXRoKCkgeyByZXR1cm4gdGhpcy5faW5GaWxlIH1cblxuXHRpbmNsdWRlQ2hlY2tzKCkgeyByZXR1cm4gdGhpcy5fY2hlY2tzIH1cblxuXHR3YXJuQXNFcnJvcigpIHsgcmV0dXJuIHRoaXNbJ193YXJuLWFzLWVycm9yJ10gfVxuXG5cdGluY2x1ZGVBbWRlZmluZSgpIHsgcmV0dXJuIHRoaXMuX2luY2x1ZGVBbWRlZmluZSB9XG5cdGluY2x1ZGVTb3VyY2VNYXAoKSB7IHJldHVybiB0aGlzLl9pbmNsdWRlU291cmNlTWFwIH1cblx0aW5jbHVkZU1vZHVsZU5hbWUoKSB7IHJldHVybiB0aGlzLl9pbmNsdWRlTW9kdWxlTmFtZSB9XG5cdGluY2x1ZGVVc2VTdHJpY3QoKSB7IHJldHVybiB0aGlzLl91c2VTdHJpY3QgfVxuXG5cdGxhenlNb2R1bGUoKSB7IHJldHVybiAhdGhpcy5fbGF6eU1vZHVsZXMgfVxuXG5cdGltcG9ydEJvb3QoKSB7IHJldHVybiB0aGlzLl9pbXBvcnRCb290IH1cblx0Ym9vdFBhdGgoKSB7IHJldHVybiBgJHt0aGlzLl9tc2xQYXRofS9wcml2YXRlL2Jvb3RgIH1cbn1cblxuY29uc3Rcblx0YmFzZW5hbWUgPSBwYXRoID0+XG5cdFx0bGFzdChwYXRoLnNwbGl0KCcvJykpLFxuXHRleHRuYW1lID0gcGF0aCA9PlxuXHRcdGxhc3QocGF0aC5zcGxpdCgnLicpKSxcblx0bm9FeHQgPSBwYXRoID0+XG5cdFx0Ly8gLSAxIGZvciB0aGUgJy4nXG5cdFx0cGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGggLSAxIC0gZXh0bmFtZShwYXRoKS5sZW5ndGgpLFxuXHRkZWZhdWx0QnVpbHRpbnMgPSBtc2xQYXRoID0+IHtcblx0XHRjb25zdCBidWlsdGlucyA9IHtcblx0XHRcdGdsb2JhbDogWydBcnJheScsICdCb29sZWFuJywgJ0Vycm9yJywgJ0Z1bmN0aW9uJywgJ01hdGgnLCAnTnVtYmVyJywgJ09iamVjdCcsXG5cdFx0XHRcdCdSZWdFeHAnLCAnU3RyaW5nJywgJ1N5bWJvbCddLFxuXHRcdFx0J21zbC5ALj8nOiBbJ3VuLT8nXSxcblx0XHRcdCdtc2wuQC5AJzogWydfJywgJy0hJywgJ2FsbD8nLCAnY291bnQnLCAnZW1wdHk/JywgJ2VtcHR5IScsICdpdGVyYXRvciddLFxuXHRcdFx0J21zbC5ALkAtVHlwZSc6IFsnZW1wdHknXSxcblx0XHRcdCdtc2wuQC5NYXAuTWFwJzogWydfJywgJ2Fzc29jIScsICc/Z2V0J10sXG5cdFx0XHQnbXNsLkAuUmFuZ2UnOiBbJ18nXSxcblx0XHRcdCdtc2wuQC5TZXEuU2VxJzogWydfJywgJys+ISddLFxuXHRcdFx0J21zbC5ALlNlcS5TdHJlYW0nOiBbJ18nXSxcblx0XHRcdCdtc2wuQC5TZXQuU2V0JzogWydfJ10sXG5cdFx0XHQnbXNsLiQnOiBbJ18nXSxcblx0XHRcdCdtc2wuY29tcGFyZSc6IFsnPT8nLCAnPD8nLCAnPD0/JywgJz4/JywgJz49PycsICdtaW4nLCAnbWF4J10sXG5cdFx0XHQnbXNsLkdlbmVyYXRvcic6IFsnZ2VuLW5leHQhJ10sXG5cdFx0XHQnbXNsLm1hdGgubWV0aG9kcyc6IFsnKycsICctJywgJyonLCAnLyddLFxuXHRcdFx0J21zbC5tYXRoLk51bWJlcic6IFsnZGl2aXNpYmxlPycsICdpbnQvJywgJ21vZHVsbycsICduZWcnLCAnbG9nJ10sXG5cdFx0XHQnbXNsLnRvLXN0cmluZyc6IFsnXycsICdpbnNwZWN0J10sXG5cdFx0XHQnbXNsLlR5cGUuS2luZCc6IFsnXycsICdraW5kIScsICdzZWxmLWtpbmQhJ10sXG5cdFx0XHQnbXNsLlR5cGUuTWV0aG9kJzogWydfJywgJ2ltcGwhJywgJ2ltcGwtZm9yJywgJ3NlbGYtaW1wbCEnXSxcblx0XHRcdCdtc2wuVHlwZS5UeXBlJzogWyc9PiddXG5cdFx0fVxuXHRcdGlmIChtc2xQYXRoICE9PSAnbXNsJylcblx0XHRcdGZvciAobGV0IGtleSBpbiBidWlsdGlucykge1xuXHRcdFx0XHRjb25zdCB4ID0gYnVpbHRpbnNba2V5XVxuXHRcdFx0XHRkZWxldGUgYnVpbHRpbnNba2V5XVxuXHRcdFx0XHRidWlsdGluc1trZXkucmVwbGFjZSgvbXNsL2csIG1zbFBhdGgpXSA9IHhcblx0XHRcdH1cblx0XHRyZXR1cm4gYnVpbHRpbnNcblx0fSxcblx0Z2VuZXJhdGVCdWlsdGluc01hcCA9IGJ1aWx0aW5zID0+IHtcblx0XHRjb25zdCBtID0gbmV3IE1hcCgpXG5cdFx0Zm9yIChjb25zdCBwYXRoIGluIGJ1aWx0aW5zKSB7XG5cdFx0XHRjb25zdCByZWFsUGF0aCA9IHBhdGgucmVwbGFjZSgvXFwuL2csICcvJylcblx0XHRcdGZvciAobGV0IGltcG9ydGVkIG9mIGJ1aWx0aW5zW3BhdGhdKSB7XG5cdFx0XHRcdGlmIChpbXBvcnRlZCA9PT0gJ18nKVxuXHRcdFx0XHRcdGltcG9ydGVkID0gbGFzdChwYXRoLnNwbGl0KCcuJykpXG5cdFx0XHRcdGlmIChtLmhhcyhpbXBvcnRlZCkpXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBCdWlsdGluICR7aW1wb3J0ZWR9IGRlZmluZWQgbW9yZSB0aGFuIG9uY2UuYClcblx0XHRcdFx0bS5zZXQoaW1wb3J0ZWQsIHJlYWxQYXRoKVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbVxuXHR9XG4iXSwic291cmNlUm9vdCI6Ii9zcmMifQ==
