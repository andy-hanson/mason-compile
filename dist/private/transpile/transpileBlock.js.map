{"version":3,"sources":["private/transpile/transpileBlock.js"],"names":[],"mappings":"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","file":"private/transpile/transpileBlock.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'esast/lib/Statement', '../util', './context', './esast-constants', './transpileMisc', './transpileVal', './util'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Statement_1 = require('esast/lib/Statement');\n    var util_1 = require('../util');\n    var context_1 = require('./context');\n    var esast_constants_1 = require('./esast-constants');\n    var transpileMisc_1 = require('./transpileMisc');\n    var transpileVal_1 = require('./transpileVal');\n    var util_2 = require('./util');\n    function transpileBlock(_, lead = null, opReturnType = null, follow = null) {\n        return util_2.loc(_, transpileBlockNoLoc(_, lead, opReturnType, follow));\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = transpileBlock;\n    function transpileBlockNoLoc(_, lead = null, opReturnType = null, follow = null) {\n        const { lines } = _;\n        const kind = context_1.verifyResults.blockKind(_);\n        function blockWithReturn(returned, lines) {\n            const doReturn = new Statement_1.ReturnStatement(util_2.maybeWrapInCheckInstance(returned, opReturnType, 'returned value'));\n            return new Statement_1.BlockStatement(util_1.cat(lead, lines, doReturn));\n        }\n        switch (kind) {\n            case 0:\n                util_1.assert(opReturnType === null);\n                return transpileBlockDoWithLeadAndFollowNoLoc(_, lead, follow);\n            case 1:\n                return new Statement_1.BlockStatement(util_1.cat(lead, util_2.tLines(util_1.rtail(lines)), transpileMisc_1.transpileThrow(util_1.last(lines))));\n            case 2:\n                return blockWithReturn(transpileVal_1.default(util_1.last(lines)), util_2.tLines(util_1.rtail(lines)));\n            case 3:\n            case 4:\n            case 5: {\n                const declare = kind === 3 ?\n                    esast_constants_1.DeclareBuiltBag :\n                    kind === 4 ? esast_constants_1.DeclareBuiltMap : esast_constants_1.DeclareBuiltObj;\n                return blockWithReturn(esast_constants_1.IdBuilt, util_1.cat(declare, util_2.tLines(lines)));\n            }\n            default:\n                throw new Error(String(kind));\n        }\n    }\n    exports.transpileBlockNoLoc = transpileBlockNoLoc;\n    function transpileBlockReturnNoLoc(returned, lines, lead, opReturnType) {\n        const ret = new Statement_1.ReturnStatement(util_2.maybeWrapInCheckInstance(returned, opReturnType, 'returned value'));\n        return new Statement_1.BlockStatement(util_1.cat(lead, lines, ret));\n    }\n    function transpileBlockDo(_) {\n        return util_2.loc(_, new Statement_1.BlockStatement(util_2.tLines(_.lines)));\n    }\n    exports.transpileBlockDo = transpileBlockDo;\n    function transpileBlockDoWithLeadAndFollow(_, lead, follow) {\n        return util_2.loc(_, transpileBlockDoWithLeadAndFollowNoLoc(_, lead, follow));\n    }\n    exports.transpileBlockDoWithLeadAndFollow = transpileBlockDoWithLeadAndFollow;\n    function transpileBlockDoWithLeadAndFollowNoLoc(_, lead, follow) {\n        return new Statement_1.BlockStatement(util_1.cat(lead, util_2.tLines(_.lines), follow));\n    }\n    exports.transpileBlockDoWithLeadAndFollowNoLoc = transpileBlockDoWithLeadAndFollowNoLoc;\n});\n"],"sourceRoot":"/source/"}