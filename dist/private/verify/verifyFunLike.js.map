{"version":3,"sources":["private/verify/verifyFunLike.js"],"names":[],"mappings":"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","file":"private/verify/verifyFunLike.js","sourcesContent":["(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", 'op/Op', '../context', '../ast/Fun', '../util', './context', './locals', './verifyBlock', './verifyLocalDeclare', './verifyVal'], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Op_1 = require('op/Op');\n    var context_1 = require('../context');\n    var Fun_1 = require('../ast/Fun');\n    var util_1 = require('../util');\n    var context_2 = require('./context');\n    var locals_1 = require('./locals');\n    var verifyBlock_1 = require('./verifyBlock');\n    var verifyLocalDeclare_1 = require('./verifyLocalDeclare');\n    var verifyVal_1 = require('./verifyVal');\n    function verifyFunLike(_) {\n        const { args, opRestArg, opReturnType } = _;\n        if (_ instanceof Fun_1.FunAbstract) {\n            for (const _ of args)\n                verifyLocalDeclare_1.justVerifyLocalDeclare(_);\n            Op_1.opEach(opRestArg, verifyLocalDeclare_1.justVerifyLocalDeclare);\n            verifyVal_1.verifyOpVal(opReturnType);\n        }\n        else if (_ instanceof Fun_1.default) {\n            verifyFun(_);\n        }\n        else\n            throw new Error();\n    }\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = verifyFunLike;\n    function verifyFun({ loc, opReturnType, isDo, opDeclareThis, args, opRestArg, kind, block }) {\n        context_1.check(opReturnType === null || !isDo, loc, _ => _.doFuncCantHaveType);\n        verifyVal_1.verifyOpVal(opReturnType);\n        const allArgs = util_1.cat(opDeclareThis, args, opRestArg);\n        context_2.withFun(kind, () => {\n            locals_1.verifyAndPlusLocals(allArgs, () => {\n                verifyBlock_1.verifyBlockSK(block, isDo ? 0 : 1);\n            });\n        });\n    }\n    exports.verifyFun = verifyFun;\n});\n"],"sourceRoot":"/source/"}